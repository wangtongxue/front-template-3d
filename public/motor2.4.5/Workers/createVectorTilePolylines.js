define(["./when-7ef6387a","./Check-ed6a1804","./Math-85667bf9","./Ellipsoid-1cbb4ac9","./Cartesian2-73569d25","./WebGLConstants-30fc6f5c","./AttributeCompression-5e3c38a2","./IndexDatatype-f12d39b5","./createTaskProcessorWorker"],(function(a,e,r,n,t,i,s,u,c){"use strict";var o=new n.Cartographic,f=new n.Cartesian3;var p=new t.Rectangle,C=new n.Ellipsoid,d=new n.Cartesian3,b={min:void 0,max:void 0};var l=new n.Cartesian3,w=new n.Cartesian3,h=new n.Cartesian3,y=new n.Cartesian3,k=new n.Cartesian3;return c((function(a,e){var i=new Uint16Array(a.positions),c=new Uint16Array(a.widths),v=new Uint32Array(a.counts),A=new Uint16Array(a.batchIds);!function(a){a=new Float64Array(a);var e=0;b.min=a[e++],b.max=a[e++],t.Rectangle.unpack(a,e,p),e+=t.Rectangle.packedLength,n.Ellipsoid.unpack(a,e,C),e+=n.Ellipsoid.packedLength,n.Cartesian3.unpack(a,e,d)}(a.packedBuffer);var g,m=C,E=d,x=function(a,e,t,i,u){var c=a.length/3,p=a.subarray(0,c),C=a.subarray(c,2*c),d=a.subarray(2*c,3*c);s.AttributeCompression.zigZagDeltaDecode(p,C,d);for(var b=new Float64Array(a.length),l=0;l<c;++l){var w=p[l],h=C[l],y=d[l],k=r.CesiumMath.lerp(e.west,e.east,w/32767),v=r.CesiumMath.lerp(e.south,e.north,h/32767),A=r.CesiumMath.lerp(t,i,y/32767),g=n.Cartographic.fromRadians(k,v,A,o),m=u.cartographicToCartesian(g,f);n.Cartesian3.pack(m,b,3*l)}return b}(i,p,b.min,b.max,m),D=x.length/3,I=4*D-4,T=new Float32Array(3*I),U=new Float32Array(3*I),F=new Float32Array(3*I),N=new Float32Array(2*I),R=new Uint16Array(I),M=0,P=0,L=0,S=0,_=v.length;for(g=0;g<_;++g){for(var G=v[g],W=c[g],B=A[g],z=0;z<G;++z){var H;if(0===z){var O=n.Cartesian3.unpack(x,3*S,l),Y=n.Cartesian3.unpack(x,3*(S+1),w);H=n.Cartesian3.subtract(O,Y,h),n.Cartesian3.add(O,H,H)}else H=n.Cartesian3.unpack(x,3*(S+z-1),h);var Z,j=n.Cartesian3.unpack(x,3*(S+z),y);if(z===G-1){var q=n.Cartesian3.unpack(x,3*(S+G-1),l),J=n.Cartesian3.unpack(x,3*(S+G-2),w);Z=n.Cartesian3.subtract(q,J,k),n.Cartesian3.add(q,Z,Z)}else Z=n.Cartesian3.unpack(x,3*(S+z+1),k);n.Cartesian3.subtract(H,E,H),n.Cartesian3.subtract(j,E,j),n.Cartesian3.subtract(Z,E,Z);for(var K=z===G-1?2:4,Q=0===z?2:0;Q<K;++Q){n.Cartesian3.pack(j,T,M),n.Cartesian3.pack(H,U,M),n.Cartesian3.pack(Z,F,M),M+=3;var V=Q-2<0?-1:1;N[P++]=Q%2*2-1,N[P++]=V*W,R[L++]=B}}S+=G}var X=u.IndexDatatype.createTypedArray(I,6*D-6),$=0,aa=0;for(_=D-1,g=0;g<_;++g)X[aa++]=$,X[aa++]=$+2,X[aa++]=$+1,X[aa++]=$+1,X[aa++]=$+2,X[aa++]=$+3,$+=4;return e.push(T.buffer,U.buffer,F.buffer),e.push(N.buffer,R.buffer,X.buffer),{indexDatatype:2===X.BYTES_PER_ELEMENT?u.IndexDatatype.UNSIGNED_SHORT:u.IndexDatatype.UNSIGNED_INT,currentPositions:T.buffer,previousPositions:U.buffer,nextPositions:F.buffer,expandAndWidth:N.buffer,batchIds:R.buffer,indices:X.buffer}}))}));
//# sourceMappingURL=createVectorTilePolylines.js.map

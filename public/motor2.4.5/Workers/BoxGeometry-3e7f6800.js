/**
 * Cesium - https://github.com/AnalyticalGraphicsInc/cesium
 *
 * Copyright 2011-2017 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md for full licensing details.
 */
define(["exports","./when-4ca4e419","./Check-430b3551","./Cartesian3-32451e63","./Transforms-7b04d7e0","./ComponentDatatype-329b9462","./GeometryAttribute-b8faa946","./GeometryAttributes-614c63f8","./arrayFill-11a46844","./VertexFormat-a4fe3a21"],(function(e,t,a,n,r,i,o,m,u,s){"use strict";var y=new n.Cartesian3;function f(e){var r=(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT)).minimum,i=e.maximum;if(a.Check.typeOf.object("min",r),a.Check.typeOf.object("max",i),t.defined(e.offsetAttribute)&&e.offsetAttribute===o.GeometryOffsetAttribute.TOP)throw new a.DeveloperError("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");var m=t.defaultValue(e.vertexFormat,s.VertexFormat.DEFAULT);this._minimum=n.Cartesian3.clone(r),this._maximum=n.Cartesian3.clone(i),this._vertexFormat=m,this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxGeometry"}f.fromDimensions=function(e){var r=(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT)).dimensions;a.Check.typeOf.object("dimensions",r),a.Check.typeOf.number.greaterThanOrEquals("dimensions.x",r.x,0),a.Check.typeOf.number.greaterThanOrEquals("dimensions.y",r.y,0),a.Check.typeOf.number.greaterThanOrEquals("dimensions.z",r.z,0);var i=n.Cartesian3.multiplyByScalar(r,.5,new n.Cartesian3);return new f({minimum:n.Cartesian3.negate(i,new n.Cartesian3),maximum:i,vertexFormat:e.vertexFormat,offsetAttribute:e.offsetAttribute})},f.fromAxisAlignedBoundingBox=function(e){return a.Check.typeOf.object("boundingBox",e),new f({minimum:e.minimum,maximum:e.maximum})},f.packedLength=2*n.Cartesian3.packedLength+s.VertexFormat.packedLength+1,f.pack=function(e,r,i){return a.Check.typeOf.object("value",e),a.Check.defined("array",r),i=t.defaultValue(i,0),n.Cartesian3.pack(e._minimum,r,i),n.Cartesian3.pack(e._maximum,r,i+n.Cartesian3.packedLength),s.VertexFormat.pack(e._vertexFormat,r,i+2*n.Cartesian3.packedLength),r[i+2*n.Cartesian3.packedLength+s.VertexFormat.packedLength]=t.defaultValue(e._offsetAttribute,-1),r};var p,x=new n.Cartesian3,c=new n.Cartesian3,b=new s.VertexFormat,l={minimum:x,maximum:c,vertexFormat:b,offsetAttribute:void 0};f.unpack=function(e,r,i){a.Check.defined("array",e),r=t.defaultValue(r,0);var o=n.Cartesian3.unpack(e,r,x),m=n.Cartesian3.unpack(e,r+n.Cartesian3.packedLength,c),u=s.VertexFormat.unpack(e,r+2*n.Cartesian3.packedLength,b),y=e[r+2*n.Cartesian3.packedLength+s.VertexFormat.packedLength];return t.defined(i)?(i._minimum=n.Cartesian3.clone(o,i._minimum),i._maximum=n.Cartesian3.clone(m,i._maximum),i._vertexFormat=s.VertexFormat.clone(u,i._vertexFormat),i._offsetAttribute=-1===y?void 0:y,i):(l.offsetAttribute=-1===y?void 0:y,new f(l))},f.createGeometry=function(e){var a=e._minimum,s=e._maximum,f=e._vertexFormat;if(!n.Cartesian3.equals(a,s)){var p,x,c=new m.GeometryAttributes;if(f.position&&(f.st||f.normal||f.tangent||f.bitangent)){if(f.position&&((x=new Float64Array(72))[0]=a.x,x[1]=a.y,x[2]=s.z,x[3]=s.x,x[4]=a.y,x[5]=s.z,x[6]=s.x,x[7]=s.y,x[8]=s.z,x[9]=a.x,x[10]=s.y,x[11]=s.z,x[12]=a.x,x[13]=a.y,x[14]=a.z,x[15]=s.x,x[16]=a.y,x[17]=a.z,x[18]=s.x,x[19]=s.y,x[20]=a.z,x[21]=a.x,x[22]=s.y,x[23]=a.z,x[24]=s.x,x[25]=a.y,x[26]=a.z,x[27]=s.x,x[28]=s.y,x[29]=a.z,x[30]=s.x,x[31]=s.y,x[32]=s.z,x[33]=s.x,x[34]=a.y,x[35]=s.z,x[36]=a.x,x[37]=a.y,x[38]=a.z,x[39]=a.x,x[40]=s.y,x[41]=a.z,x[42]=a.x,x[43]=s.y,x[44]=s.z,x[45]=a.x,x[46]=a.y,x[47]=s.z,x[48]=a.x,x[49]=s.y,x[50]=a.z,x[51]=s.x,x[52]=s.y,x[53]=a.z,x[54]=s.x,x[55]=s.y,x[56]=s.z,x[57]=a.x,x[58]=s.y,x[59]=s.z,x[60]=a.x,x[61]=a.y,x[62]=a.z,x[63]=s.x,x[64]=a.y,x[65]=a.z,x[66]=s.x,x[67]=a.y,x[68]=s.z,x[69]=a.x,x[70]=a.y,x[71]=s.z,c.position=new o.GeometryAttribute({componentDatatype:i.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:x})),f.normal){var b=new Float32Array(72);b[0]=0,b[1]=0,b[2]=1,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=1,b[9]=0,b[10]=0,b[11]=1,b[12]=0,b[13]=0,b[14]=-1,b[15]=0,b[16]=0,b[17]=-1,b[18]=0,b[19]=0,b[20]=-1,b[21]=0,b[22]=0,b[23]=-1,b[24]=1,b[25]=0,b[26]=0,b[27]=1,b[28]=0,b[29]=0,b[30]=1,b[31]=0,b[32]=0,b[33]=1,b[34]=0,b[35]=0,b[36]=-1,b[37]=0,b[38]=0,b[39]=-1,b[40]=0,b[41]=0,b[42]=-1,b[43]=0,b[44]=0,b[45]=-1,b[46]=0,b[47]=0,b[48]=0,b[49]=1,b[50]=0,b[51]=0,b[52]=1,b[53]=0,b[54]=0,b[55]=1,b[56]=0,b[57]=0,b[58]=1,b[59]=0,b[60]=0,b[61]=-1,b[62]=0,b[63]=0,b[64]=-1,b[65]=0,b[66]=0,b[67]=-1,b[68]=0,b[69]=0,b[70]=-1,b[71]=0,c.normal=new o.GeometryAttribute({componentDatatype:i.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:b})}if(f.st){var l=new Float32Array(48);l[0]=0,l[1]=0,l[2]=1,l[3]=0,l[4]=1,l[5]=1,l[6]=0,l[7]=1,l[8]=1,l[9]=0,l[10]=0,l[11]=0,l[12]=0,l[13]=1,l[14]=1,l[15]=1,l[16]=0,l[17]=0,l[18]=1,l[19]=0,l[20]=1,l[21]=1,l[22]=0,l[23]=1,l[24]=1,l[25]=0,l[26]=0,l[27]=0,l[28]=0,l[29]=1,l[30]=1,l[31]=1,l[32]=1,l[33]=0,l[34]=0,l[35]=0,l[36]=0,l[37]=1,l[38]=1,l[39]=1,l[40]=0,l[41]=0,l[42]=1,l[43]=0,l[44]=1,l[45]=1,l[46]=0,l[47]=1,c.st=new o.GeometryAttribute({componentDatatype:i.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:l})}if(f.tangent){var A=new Float32Array(72);A[0]=1,A[1]=0,A[2]=0,A[3]=1,A[4]=0,A[5]=0,A[6]=1,A[7]=0,A[8]=0,A[9]=1,A[10]=0,A[11]=0,A[12]=-1,A[13]=0,A[14]=0,A[15]=-1,A[16]=0,A[17]=0,A[18]=-1,A[19]=0,A[20]=0,A[21]=-1,A[22]=0,A[23]=0,A[24]=0,A[25]=1,A[26]=0,A[27]=0,A[28]=1,A[29]=0,A[30]=0,A[31]=1,A[32]=0,A[33]=0,A[34]=1,A[35]=0,A[36]=0,A[37]=-1,A[38]=0,A[39]=0,A[40]=-1,A[41]=0,A[42]=0,A[43]=-1,A[44]=0,A[45]=0,A[46]=-1,A[47]=0,A[48]=-1,A[49]=0,A[50]=0,A[51]=-1,A[52]=0,A[53]=0,A[54]=-1,A[55]=0,A[56]=0,A[57]=-1,A[58]=0,A[59]=0,A[60]=1,A[61]=0,A[62]=0,A[63]=1,A[64]=0,A[65]=0,A[66]=1,A[67]=0,A[68]=0,A[69]=1,A[70]=0,A[71]=0,c.tangent=new o.GeometryAttribute({componentDatatype:i.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:A})}if(f.bitangent){var d=new Float32Array(72);d[0]=0,d[1]=1,d[2]=0,d[3]=0,d[4]=1,d[5]=0,d[6]=0,d[7]=1,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=1,d[14]=0,d[15]=0,d[16]=1,d[17]=0,d[18]=0,d[19]=1,d[20]=0,d[21]=0,d[22]=1,d[23]=0,d[24]=0,d[25]=0,d[26]=1,d[27]=0,d[28]=0,d[29]=1,d[30]=0,d[31]=0,d[32]=1,d[33]=0,d[34]=0,d[35]=1,d[36]=0,d[37]=0,d[38]=1,d[39]=0,d[40]=0,d[41]=1,d[42]=0,d[43]=0,d[44]=1,d[45]=0,d[46]=0,d[47]=1,d[48]=0,d[49]=0,d[50]=1,d[51]=0,d[52]=0,d[53]=1,d[54]=0,d[55]=0,d[56]=1,d[57]=0,d[58]=0,d[59]=1,d[60]=0,d[61]=0,d[62]=1,d[63]=0,d[64]=0,d[65]=1,d[66]=0,d[67]=0,d[68]=1,d[69]=0,d[70]=0,d[71]=1,c.bitangent=new o.GeometryAttribute({componentDatatype:i.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:d})}(p=new Uint16Array(36))[0]=0,p[1]=1,p[2]=2,p[3]=0,p[4]=2,p[5]=3,p[6]=6,p[7]=5,p[8]=4,p[9]=7,p[10]=6,p[11]=4,p[12]=8,p[13]=9,p[14]=10,p[15]=8,p[16]=10,p[17]=11,p[18]=14,p[19]=13,p[20]=12,p[21]=15,p[22]=14,p[23]=12,p[24]=18,p[25]=17,p[26]=16,p[27]=19,p[28]=18,p[29]=16,p[30]=20,p[31]=21,p[32]=22,p[33]=20,p[34]=22,p[35]=23}else(x=new Float64Array(24))[0]=a.x,x[1]=a.y,x[2]=a.z,x[3]=s.x,x[4]=a.y,x[5]=a.z,x[6]=s.x,x[7]=s.y,x[8]=a.z,x[9]=a.x,x[10]=s.y,x[11]=a.z,x[12]=a.x,x[13]=a.y,x[14]=s.z,x[15]=s.x,x[16]=a.y,x[17]=s.z,x[18]=s.x,x[19]=s.y,x[20]=s.z,x[21]=a.x,x[22]=s.y,x[23]=s.z,c.position=new o.GeometryAttribute({componentDatatype:i.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:x}),(p=new Uint16Array(36))[0]=4,p[1]=5,p[2]=6,p[3]=4,p[4]=6,p[5]=7,p[6]=1,p[7]=0,p[8]=3,p[9]=1,p[10]=3,p[11]=2,p[12]=1,p[13]=6,p[14]=5,p[15]=1,p[16]=2,p[17]=6,p[18]=2,p[19]=3,p[20]=7,p[21]=2,p[22]=7,p[23]=6,p[24]=3,p[25]=0,p[26]=4,p[27]=3,p[28]=4,p[29]=7,p[30]=0,p[31]=1,p[32]=5,p[33]=0,p[34]=5,p[35]=4;var C=n.Cartesian3.subtract(s,a,y),v=.5*n.Cartesian3.magnitude(C);if(t.defined(e._offsetAttribute)){var h=x.length,z=new Uint8Array(h/3),w=e._offsetAttribute===o.GeometryOffsetAttribute.NONE?0:1;u.arrayFill(z,w),c.applyOffset=new o.GeometryAttribute({componentDatatype:i.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:z})}return new o.Geometry({attributes:c,indices:p,primitiveType:o.PrimitiveType.TRIANGLES,boundingSphere:new r.BoundingSphere(n.Cartesian3.ZERO,v),offsetAttribute:e._offsetAttribute})}},f.getUnitBox=function(){return t.defined(p)||(p=f.createGeometry(f.fromDimensions({dimensions:new n.Cartesian3(1,1,1),vertexFormat:s.VertexFormat.POSITION_ONLY}))),p},e.BoxGeometry=f}));

/**
 * Cesium - https://github.com/AnalyticalGraphicsInc/cesium
 *
 * Copyright 2011-2017 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md for full licensing details.
 */
define(["exports","./when-4ca4e419","./defineProperties-163ddb68","./RuntimeError-443472b0"],(function(e,n,r,t){"use strict";var u,l,i,s,o,c,f,d,a,p,m,A,g,v,y,F,E,b,x,h,w={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},W={};function C(e){for(var n=e.split("."),r=0,t=n.length;r<t;++r)n[r]=parseInt(n[r],10);return n}function I(){if(!n.defined(i)&&(i=!1,!P())){var e=/ Chrome\/([\.0-9]+)/.exec(l.userAgent);null!==e&&(i=!0,s=C(e[1]))}return i}function S(){if(!n.defined(o)&&(o=!1,!I()&&!P()&&/ Safari\/[\.0-9]+/.test(l.userAgent))){var e=/ Version\/([\.0-9]+)/.exec(l.userAgent);null!==e&&(o=!0,c=C(e[1]))}return o}function V(){if(!n.defined(f)){f=!1;var e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(l.userAgent);null!==e&&(f=!0,(d=C(e[1])).isNightly=!!e[2])}return f}function q(){var e;n.defined(a)||(a=!1,"Microsoft Internet Explorer"===l.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(l.userAgent))&&(a=!0,p=C(e[1])):"Netscape"===l.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(l.userAgent))&&(a=!0,p=C(e[1])));return a}function P(){if(!n.defined(m)){m=!1;var e=/ Edge\/([\.0-9]+)/.exec(l.userAgent);null!==e&&(m=!0,A=C(e[1]))}return m}function k(){if(!n.defined(g)){g=!1;var e=/Firefox\/([\.0-9]+)/.exec(l.userAgent);null!==e&&(g=!0,v=C(e[1]))}return g}function R(){if(!n.defined(b)){var e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");var r=e.style.imageRendering;(b=n.defined(r)&&""!==r)&&(E=r)}return b}function U(){if(n.defined(h))return h.promise;h=n.when.defer(),P()&&(x=!1,h.resolve(x));var e=new Image;return e.onload=function(){x=e.width>0&&e.height>0,h.resolve(x)},e.onerror=function(){x=!1,h.resolve(x)},e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",h.promise}r.defineProperties(W,{element:{get:function(){if(W.supportsFullscreen())return document[w.fullscreenElement]}},changeEventName:{get:function(){if(W.supportsFullscreen())return w.fullscreenchange}},errorEventName:{get:function(){if(W.supportsFullscreen())return w.fullscreenerror}},enabled:{get:function(){if(W.supportsFullscreen())return document[w.fullscreenEnabled]}},fullscreen:{get:function(){if(W.supportsFullscreen())return null!==W.element}}}),W.supportsFullscreen=function(){if(n.defined(u))return u;u=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return w.requestFullscreen="requestFullscreen",w.exitFullscreen="exitFullscreen",w.fullscreenEnabled="fullscreenEnabled",w.fullscreenElement="fullscreenElement",w.fullscreenchange="fullscreenchange",w.fullscreenerror="fullscreenerror",u=!0;for(var r,t=["webkit","moz","o","ms","khtml"],l=0,i=t.length;l<i;++l){var s=t[l];("function"==typeof e[r=s+"RequestFullscreen"]||"function"==typeof e[r=s+"RequestFullScreen"])&&(w.requestFullscreen=r,u=!0),r=s+"ExitFullscreen","function"==typeof document[r]?w.exitFullscreen=r:(r=s+"CancelFullScreen","function"==typeof document[r]&&(w.exitFullscreen=r)),r=s+"FullscreenEnabled",void 0!==document[r]?w.fullscreenEnabled=r:(r=s+"FullScreenEnabled",void 0!==document[r]&&(w.fullscreenEnabled=r)),r=s+"FullscreenElement",void 0!==document[r]?w.fullscreenElement=r:(r=s+"FullScreenElement",void 0!==document[r]&&(w.fullscreenElement=r)),r=s+"fullscreenchange",void 0!==document["on"+r]&&("ms"===s&&(r="MSFullscreenChange"),w.fullscreenchange=r),r=s+"fullscreenerror",void 0!==document["on"+r]&&("ms"===s&&(r="MSFullscreenError"),w.fullscreenerror=r)}return u},W.requestFullscreen=function(e,n){W.supportsFullscreen()&&e[w.requestFullscreen]({vrDisplay:n})},W.exitFullscreen=function(){W.supportsFullscreen()&&document[w.exitFullscreen]()},l="undefined"!=typeof navigator?navigator:{};var N=[];"undefined"!=typeof ArrayBuffer&&(N.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&N.push(Uint8ClampedArray),"undefined"!=typeof CanvasPixelArray&&N.push(CanvasPixelArray));var B={isChrome:I,chromeVersion:function(){return I()&&s},isSafari:S,safariVersion:function(){return S()&&c},isWebkit:V,webkitVersion:function(){return V()&&d},isInternetExplorer:q,internetExplorerVersion:function(){return q()&&p},isEdge:P,edgeVersion:function(){return P()&&A},isFirefox:k,firefoxVersion:function(){return k()&&v},isWindows:function(){return n.defined(y)||(y=/Windows/i.test(l.appVersion)),y},hardwareConcurrency:n.defaultValue(l.hardwareConcurrency,3),supportsPointerEvents:function(){return n.defined(F)||(F=!k()&&"undefined"!=typeof PointerEvent&&(!n.defined(l.pointerEnabled)||l.pointerEnabled)),F},supportsImageRenderingPixelated:R,supportsWebP:U,supportsWebPSync:function(){return n.defined(h)||U(),x},imageRenderingValue:function(){return R()?E:void 0},typedArrayTypes:N,maxDecodingWorkers:1,supportsFullscreen:function(){return W.supportsFullscreen()},supportsTypedArrays:function(){return"undefined"!=typeof ArrayBuffer},supportsWebWorkers:function(){return"undefined"!=typeof Worker},supportsWebAssembly:function(){return"undefined"!=typeof WebAssembly&&!B.isEdge()}};e.FeatureDetection=B}));

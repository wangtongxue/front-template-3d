/**
 * Cesium - https://github.com/AnalyticalGraphicsInc/cesium
 *
 * Copyright 2011-2017 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md for full licensing details.
 */
define(["exports","./when-4ca4e419","./Check-430b3551","./defineProperties-163ddb68","./Cartesian3-32451e63","./RuntimeError-443472b0"],(function(e,t,n,r,a,c){"use strict";function u(e,n,r,a,c,u,o,i,f){this[0]=t.defaultValue(e,0),this[1]=t.defaultValue(a,0),this[2]=t.defaultValue(o,0),this[3]=t.defaultValue(n,0),this[4]=t.defaultValue(c,0),this[5]=t.defaultValue(i,0),this[6]=t.defaultValue(r,0),this[7]=t.defaultValue(u,0),this[8]=t.defaultValue(f,0)}u.packedLength=9,u.pack=function(e,r,a){return n.Check.typeOf.object("value",e),n.Check.defined("array",r),a=t.defaultValue(a,0),r[a++]=e[0],r[a++]=e[1],r[a++]=e[2],r[a++]=e[3],r[a++]=e[4],r[a++]=e[5],r[a++]=e[6],r[a++]=e[7],r[a++]=e[8],r},u.unpack=function(e,r,a){return n.Check.defined("array",e),r=t.defaultValue(r,0),t.defined(a)||(a=new u),a[0]=e[r++],a[1]=e[r++],a[2]=e[r++],a[3]=e[r++],a[4]=e[r++],a[5]=e[r++],a[6]=e[r++],a[7]=e[r++],a[8]=e[r++],a},u.clone=function(e,n){if(t.defined(e))return t.defined(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n):new u(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},u.fromArray=function(e,r,a){return n.Check.defined("array",e),r=t.defaultValue(r,0),t.defined(a)||(a=new u),a[0]=e[r],a[1]=e[r+1],a[2]=e[r+2],a[3]=e[r+3],a[4]=e[r+4],a[5]=e[r+5],a[6]=e[r+6],a[7]=e[r+7],a[8]=e[r+8],a},u.fromColumnMajorArray=function(e,t){return n.Check.defined("values",e),u.clone(e,t)},u.fromRowMajorArray=function(e,r){return n.Check.defined("values",e),t.defined(r)?(r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8],r):new u(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},u.fromQuaternion=function(e,r){n.Check.typeOf.object("quaternion",e);var a=e.x*e.x,c=e.x*e.y,o=e.x*e.z,i=e.x*e.w,f=e.y*e.y,h=e.y*e.z,s=e.y*e.w,l=e.z*e.z,y=e.z*e.w,p=e.w*e.w,C=a-f-l+p,O=2*(c-y),b=2*(o+s),m=2*(c+y),k=-a+f-l+p,d=2*(h-i),x=2*(o-s),j=2*(h+i),w=-a-f+l+p;return t.defined(r)?(r[0]=C,r[1]=m,r[2]=x,r[3]=O,r[4]=k,r[5]=j,r[6]=b,r[7]=d,r[8]=w,r):new u(C,O,b,m,k,d,x,j,w)},u.fromHeadingPitchRoll=function(e,r){n.Check.typeOf.object("headingPitchRoll",e);var a=Math.cos(-e.pitch),c=Math.cos(-e.heading),o=Math.cos(e.roll),i=Math.sin(-e.pitch),f=Math.sin(-e.heading),h=Math.sin(e.roll),s=a*c,l=-o*f+h*i*c,y=h*f+o*i*c,p=a*f,C=o*c+h*i*f,O=-h*c+o*i*f,b=-i,m=h*a,k=o*a;return t.defined(r)?(r[0]=s,r[1]=p,r[2]=b,r[3]=l,r[4]=C,r[5]=m,r[6]=y,r[7]=O,r[8]=k,r):new u(s,l,y,p,C,O,b,m,k)},u.fromScale=function(e,r){return n.Check.typeOf.object("scale",e),t.defined(r)?(r[0]=e.x,r[1]=0,r[2]=0,r[3]=0,r[4]=e.y,r[5]=0,r[6]=0,r[7]=0,r[8]=e.z,r):new u(e.x,0,0,0,e.y,0,0,0,e.z)},u.fromUniformScale=function(e,r){return n.Check.typeOf.number("scale",e),t.defined(r)?(r[0]=e,r[1]=0,r[2]=0,r[3]=0,r[4]=e,r[5]=0,r[6]=0,r[7]=0,r[8]=e,r):new u(e,0,0,0,e,0,0,0,e)},u.fromCrossProduct=function(e,r){return n.Check.typeOf.object("vector",e),t.defined(r)?(r[0]=0,r[1]=e.z,r[2]=-e.y,r[3]=-e.z,r[4]=0,r[5]=e.x,r[6]=e.y,r[7]=-e.x,r[8]=0,r):new u(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},u.fromRotationX=function(e,r){n.Check.typeOf.number("angle",e);var a=Math.cos(e),c=Math.sin(e);return t.defined(r)?(r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=a,r[5]=c,r[6]=0,r[7]=-c,r[8]=a,r):new u(1,0,0,0,a,-c,0,c,a)},u.fromRotationY=function(e,r){n.Check.typeOf.number("angle",e);var a=Math.cos(e),c=Math.sin(e);return t.defined(r)?(r[0]=a,r[1]=0,r[2]=-c,r[3]=0,r[4]=1,r[5]=0,r[6]=c,r[7]=0,r[8]=a,r):new u(a,0,c,0,1,0,-c,0,a)},u.fromRotationZ=function(e,r){n.Check.typeOf.number("angle",e);var a=Math.cos(e),c=Math.sin(e);return t.defined(r)?(r[0]=a,r[1]=c,r[2]=0,r[3]=-c,r[4]=a,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r):new u(a,-c,0,c,a,0,0,0,1)},u.toArray=function(e,r){return n.Check.typeOf.object("matrix",e),t.defined(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},u.getElementIndex=function(e,t){return n.Check.typeOf.number.greaterThanOrEquals("row",t,0),n.Check.typeOf.number.lessThanOrEquals("row",t,2),n.Check.typeOf.number.greaterThanOrEquals("column",e,0),n.Check.typeOf.number.lessThanOrEquals("column",e,2),3*e+t},u.getColumn=function(e,t,r){n.Check.typeOf.object("matrix",e),n.Check.typeOf.number.greaterThanOrEquals("index",t,0),n.Check.typeOf.number.lessThanOrEquals("index",t,2),n.Check.typeOf.object("result",r);var a=3*t,c=e[a],u=e[a+1],o=e[a+2];return r.x=c,r.y=u,r.z=o,r},u.setColumn=function(e,t,r,a){n.Check.typeOf.object("matrix",e),n.Check.typeOf.number.greaterThanOrEquals("index",t,0),n.Check.typeOf.number.lessThanOrEquals("index",t,2),n.Check.typeOf.object("cartesian",r),n.Check.typeOf.object("result",a);var c=3*t;return(a=u.clone(e,a))[c]=r.x,a[c+1]=r.y,a[c+2]=r.z,a},u.getRow=function(e,t,r){n.Check.typeOf.object("matrix",e),n.Check.typeOf.number.greaterThanOrEquals("index",t,0),n.Check.typeOf.number.lessThanOrEquals("index",t,2),n.Check.typeOf.object("result",r);var a=e[t],c=e[t+3],u=e[t+6];return r.x=a,r.y=c,r.z=u,r},u.setRow=function(e,t,r,a){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.number.greaterThanOrEquals("index",t,0),n.Check.typeOf.number.lessThanOrEquals("index",t,2),n.Check.typeOf.object("cartesian",r),n.Check.typeOf.object("result",a),(a=u.clone(e,a))[t]=r.x,a[t+3]=r.y,a[t+6]=r.z,a};var o=new a.Cartesian3;u.getScale=function(e,t){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("result",t),t.x=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[0],e[1],e[2],o)),t.y=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[3],e[4],e[5],o)),t.z=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[6],e[7],e[8],o)),t};var i=new a.Cartesian3;u.getMaximumScale=function(e){return u.getScale(e,i),a.Cartesian3.maximumComponent(i)},u.multiply=function(e,t,r){n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),n.Check.typeOf.object("result",r);var a=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],c=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],u=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],o=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],i=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],f=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],h=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],s=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],l=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return r[0]=a,r[1]=c,r[2]=u,r[3]=o,r[4]=i,r[5]=f,r[6]=h,r[7]=s,r[8]=l,r},u.add=function(e,t,r){return n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),n.Check.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r},u.subtract=function(e,t,r){return n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),n.Check.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r},u.multiplyByVector=function(e,t,r){n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("cartesian",t),n.Check.typeOf.object("result",r);var a=t.x,c=t.y,u=t.z,o=e[0]*a+e[3]*c+e[6]*u,i=e[1]*a+e[4]*c+e[7]*u,f=e[2]*a+e[5]*c+e[8]*u;return r.x=o,r.y=i,r.z=f,r},u.multiplyByScalar=function(e,t,r){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.number("scalar",t),n.Check.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r},u.multiplyByScale=function(e,t,r){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("scale",t),n.Check.typeOf.object("result",r),r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.x,r[3]=e[3]*t.y,r[4]=e[4]*t.y,r[5]=e[5]*t.y,r[6]=e[6]*t.z,r[7]=e[7]*t.z,r[8]=e[8]*t.z,r},u.negate=function(e,t){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},u.transpose=function(e,t){n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("result",t);var r=e[0],a=e[3],c=e[6],u=e[1],o=e[4],i=e[7],f=e[2],h=e[5],s=e[8];return t[0]=r,t[1]=a,t[2]=c,t[3]=u,t[4]=o,t[5]=i,t[6]=f,t[7]=h,t[8]=s,t};var f=[1,0,0],h=[2,2,1];function s(e){for(var t=0,n=0;n<3;++n){var r=e[u.getElementIndex(h[n],f[n])];t+=2*r*r}return Math.sqrt(t)}function l(e,t){for(var n=r.CesiumMath.EPSILON15,a=0,c=1,o=0;o<3;++o){var i=Math.abs(e[u.getElementIndex(h[o],f[o])]);i>a&&(c=o,a=i)}var s=1,l=0,y=f[c],p=h[c];if(Math.abs(e[u.getElementIndex(p,y)])>n){var C,O=(e[u.getElementIndex(p,p)]-e[u.getElementIndex(y,y)])/2/e[u.getElementIndex(p,y)];l=(C=O<0?-1/(-O+Math.sqrt(1+O*O)):1/(O+Math.sqrt(1+O*O)))*(s=1/Math.sqrt(1+C*C))}return(t=u.clone(u.IDENTITY,t))[u.getElementIndex(y,y)]=t[u.getElementIndex(p,p)]=s,t[u.getElementIndex(p,y)]=l,t[u.getElementIndex(y,p)]=-l,t}var y=new u,p=new u;function C(e,n,r,a){this.x=t.defaultValue(e,0),this.y=t.defaultValue(n,0),this.z=t.defaultValue(r,0),this.w=t.defaultValue(a,0)}u.computeEigenDecomposition=function(e,a){n.Check.typeOf.object("matrix",e);var c=r.CesiumMath.EPSILON20,o=0,i=0;t.defined(a)||(a={});for(var f=a.unitary=u.clone(u.IDENTITY,a.unitary),h=a.diagonal=u.clone(e,a.diagonal),C=c*function(e){for(var t=0,n=0;n<9;++n){var r=e[n];t+=r*r}return Math.sqrt(t)}(h);i<10&&s(h)>C;)l(h,y),u.transpose(y,p),u.multiply(h,y,h),u.multiply(p,h,h),u.multiply(f,y,f),++o>2&&(++i,o=0);return a},u.abs=function(e,t){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},u.determinant=function(e){n.Check.typeOf.object("matrix",e);var t=e[0],r=e[3],a=e[6],c=e[1],u=e[4],o=e[7],i=e[2],f=e[5],h=e[8];return t*(u*h-f*o)+c*(f*a-r*h)+i*(r*o-u*a)},u.inverse=function(e,t){n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("result",t);var a=e[0],c=e[1],o=e[2],i=e[3],f=e[4],h=e[5],s=e[6],l=e[7],y=e[8],p=u.determinant(e);if(Math.abs(p)<=r.CesiumMath.EPSILON15)throw new n.DeveloperError("matrix is not invertible");t[0]=f*y-l*h,t[1]=l*o-c*y,t[2]=c*h-f*o,t[3]=s*h-i*y,t[4]=a*y-s*o,t[5]=i*o-a*h,t[6]=i*l-s*f,t[7]=s*c-a*l,t[8]=a*f-i*c;var C=1/p;return u.multiplyByScalar(t,C,t)},u.equals=function(e,n){return e===n||t.defined(e)&&t.defined(n)&&e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[7]===n[7]&&e[8]===n[8]},u.equalsEpsilon=function(e,r,a){return n.Check.typeOf.number("epsilon",a),e===r||t.defined(e)&&t.defined(r)&&Math.abs(e[0]-r[0])<=a&&Math.abs(e[1]-r[1])<=a&&Math.abs(e[2]-r[2])<=a&&Math.abs(e[3]-r[3])<=a&&Math.abs(e[4]-r[4])<=a&&Math.abs(e[5]-r[5])<=a&&Math.abs(e[6]-r[6])<=a&&Math.abs(e[7]-r[7])<=a&&Math.abs(e[8]-r[8])<=a},u.IDENTITY=t.freezeObject(new u(1,0,0,0,1,0,0,0,1)),u.ZERO=t.freezeObject(new u(0,0,0,0,0,0,0,0,0)),u.COLUMN0ROW0=0,u.COLUMN0ROW1=1,u.COLUMN0ROW2=2,u.COLUMN1ROW0=3,u.COLUMN1ROW1=4,u.COLUMN1ROW2=5,u.COLUMN2ROW0=6,u.COLUMN2ROW1=7,u.COLUMN2ROW2=8,r.defineProperties(u.prototype,{length:{get:function(){return u.packedLength}}}),u.prototype.clone=function(e){return u.clone(this,e)},u.prototype.equals=function(e){return u.equals(this,e)},u.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]},u.prototype.equalsEpsilon=function(e,t){return u.equalsEpsilon(this,e,t)},u.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"},C.fromElements=function(e,n,r,a,c){return t.defined(c)?(c.x=e,c.y=n,c.z=r,c.w=a,c):new C(e,n,r,a)},C.fromColor=function(e,r){return n.Check.typeOf.object("color",e),t.defined(r)?(r.x=e.red,r.y=e.green,r.z=e.blue,r.w=e.alpha,r):new C(e.red,e.green,e.blue,e.alpha)},C.clone=function(e,n){if(t.defined(e))return t.defined(n)?(n.x=e.x,n.y=e.y,n.z=e.z,n.w=e.w,n):new C(e.x,e.y,e.z,e.w)},C.packedLength=4,C.pack=function(e,r,a){return n.Check.typeOf.object("value",e),n.Check.defined("array",r),a=t.defaultValue(a,0),r[a++]=e.x,r[a++]=e.y,r[a++]=e.z,r[a]=e.w,r},C.unpack=function(e,r,a){return n.Check.defined("array",e),r=t.defaultValue(r,0),t.defined(a)||(a=new C),a.x=e[r++],a.y=e[r++],a.z=e[r++],a.w=e[r],a},C.packArray=function(e,r){n.Check.defined("array",e);var a=e.length;t.defined(r)?r.length=4*a:r=new Array(4*a);for(var c=0;c<a;++c)C.pack(e[c],r,4*c);return r},C.unpackArray=function(e,r){n.Check.defined("array",e);var a=e.length;t.defined(r)?r.length=a/4:r=new Array(a/4);for(var c=0;c<a;c+=4){var u=c/4;r[u]=C.unpack(e,c,r[u])}return r},C.fromArray=C.unpack,C.maximumComponent=function(e){return n.Check.typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z,e.w)},C.minimumComponent=function(e){return n.Check.typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z,e.w)},C.minimumByComponent=function(e,t,r){return n.Check.typeOf.object("first",e),n.Check.typeOf.object("second",t),n.Check.typeOf.object("result",r),r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r.w=Math.min(e.w,t.w),r},C.maximumByComponent=function(e,t,r){return n.Check.typeOf.object("first",e),n.Check.typeOf.object("second",t),n.Check.typeOf.object("result",r),r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r.w=Math.max(e.w,t.w),r},C.magnitudeSquared=function(e){return n.Check.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},C.magnitude=function(e){return Math.sqrt(C.magnitudeSquared(e))};var O=new C;C.distance=function(e,t){return n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),C.subtract(e,t,O),C.magnitude(O)},C.distanceSquared=function(e,t){return n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),C.subtract(e,t,O),C.magnitudeSquared(O)},C.normalize=function(e,t){n.Check.typeOf.object("cartesian",e),n.Check.typeOf.object("result",t);var r=C.magnitude(e);if(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,t.w=e.w/r,isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||isNaN(t.w))throw new n.DeveloperError("normalized result is not a number");return t},C.dot=function(e,t){return n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},C.multiplyComponents=function(e,t,r){return n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),n.Check.typeOf.object("result",r),r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r.w=e.w*t.w,r},C.divideComponents=function(e,t,r){return n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),n.Check.typeOf.object("result",r),r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r.w=e.w/t.w,r},C.add=function(e,t,r){return n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),n.Check.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},C.subtract=function(e,t,r){return n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),n.Check.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},C.multiplyByScalar=function(e,t,r){return n.Check.typeOf.object("cartesian",e),n.Check.typeOf.number("scalar",t),n.Check.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},C.divideByScalar=function(e,t,r){return n.Check.typeOf.object("cartesian",e),n.Check.typeOf.number("scalar",t),n.Check.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},C.negate=function(e,t){return n.Check.typeOf.object("cartesian",e),n.Check.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},C.abs=function(e,t){return n.Check.typeOf.object("cartesian",e),n.Check.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var b=new C;C.lerp=function(e,t,r,a){return n.Check.typeOf.object("start",e),n.Check.typeOf.object("end",t),n.Check.typeOf.number("t",r),n.Check.typeOf.object("result",a),C.multiplyByScalar(t,r,b),a=C.multiplyByScalar(e,1-r,a),C.add(b,a,a)};var m=new C;C.mostOrthogonalAxis=function(e,t){n.Check.typeOf.object("cartesian",e),n.Check.typeOf.object("result",t);var r=C.normalize(e,m);return C.abs(r,r),t=r.x<=r.y?r.x<=r.z?r.x<=r.w?C.clone(C.UNIT_X,t):C.clone(C.UNIT_W,t):r.z<=r.w?C.clone(C.UNIT_Z,t):C.clone(C.UNIT_W,t):r.y<=r.z?r.y<=r.w?C.clone(C.UNIT_Y,t):C.clone(C.UNIT_W,t):r.z<=r.w?C.clone(C.UNIT_Z,t):C.clone(C.UNIT_W,t)},C.equals=function(e,n){return e===n||t.defined(e)&&t.defined(n)&&e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w},C.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]&&e.w===t[n+3]},C.equalsEpsilon=function(e,n,a,c){return e===n||t.defined(e)&&t.defined(n)&&r.CesiumMath.equalsEpsilon(e.x,n.x,a,c)&&r.CesiumMath.equalsEpsilon(e.y,n.y,a,c)&&r.CesiumMath.equalsEpsilon(e.z,n.z,a,c)&&r.CesiumMath.equalsEpsilon(e.w,n.w,a,c)},C.ZERO=t.freezeObject(new C(0,0,0,0)),C.UNIT_X=t.freezeObject(new C(1,0,0,0)),C.UNIT_Y=t.freezeObject(new C(0,1,0,0)),C.UNIT_Z=t.freezeObject(new C(0,0,1,0)),C.UNIT_W=t.freezeObject(new C(0,0,0,1)),C.prototype.clone=function(e){return C.clone(this,e)},C.prototype.equals=function(e){return C.equals(this,e)},C.prototype.equalsEpsilon=function(e,t,n){return C.equalsEpsilon(this,e,t,n)},C.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var k=new Float32Array(1);function d(e,n,r,a,c,u,o,i,f,h,s,l,y,p,C,O){this[0]=t.defaultValue(e,0),this[1]=t.defaultValue(c,0),this[2]=t.defaultValue(f,0),this[3]=t.defaultValue(y,0),this[4]=t.defaultValue(n,0),this[5]=t.defaultValue(u,0),this[6]=t.defaultValue(h,0),this[7]=t.defaultValue(p,0),this[8]=t.defaultValue(r,0),this[9]=t.defaultValue(o,0),this[10]=t.defaultValue(s,0),this[11]=t.defaultValue(C,0),this[12]=t.defaultValue(a,0),this[13]=t.defaultValue(i,0),this[14]=t.defaultValue(l,0),this[15]=t.defaultValue(O,0)}C.packFloat=function(e,a){if(n.Check.typeOf.number("value",e),t.defined(a)||(a=new C),k[0]=e,0===(e=k[0]))return C.clone(C.ZERO,a);var c,u=e<0?1:0;isFinite(e)?(e=Math.abs(e),c=Math.floor(r.CesiumMath.logBase(e,10))+1,e/=Math.pow(10,c)):(e=.1,c=38);var o=256*e;return a.x=Math.floor(o),o=256*(o-a.x),a.y=Math.floor(o),o=256*(o-a.y),a.z=Math.floor(o),a.w=2*(c+38)+u,a},C.unpackFloat=function(e){n.Check.typeOf.object("packedFloat",e);var t=e.w/2,r=Math.floor(t),a=2*(t-r);if(a=-(a=2*a-1),(r-=38)>=38)return a<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;var c=a*e.x*(1/256);return c+=a*e.y*(1/65536),(c+=a*e.z*(1/16777216))*Math.pow(10,r)},d.packedLength=16,d.pack=function(e,r,a){return n.Check.typeOf.object("value",e),n.Check.defined("array",r),a=t.defaultValue(a,0),r[a++]=e[0],r[a++]=e[1],r[a++]=e[2],r[a++]=e[3],r[a++]=e[4],r[a++]=e[5],r[a++]=e[6],r[a++]=e[7],r[a++]=e[8],r[a++]=e[9],r[a++]=e[10],r[a++]=e[11],r[a++]=e[12],r[a++]=e[13],r[a++]=e[14],r[a]=e[15],r},d.unpack=function(e,r,a){return n.Check.defined("array",e),r=t.defaultValue(r,0),t.defined(a)||(a=new d),a[0]=e[r++],a[1]=e[r++],a[2]=e[r++],a[3]=e[r++],a[4]=e[r++],a[5]=e[r++],a[6]=e[r++],a[7]=e[r++],a[8]=e[r++],a[9]=e[r++],a[10]=e[r++],a[11]=e[r++],a[12]=e[r++],a[13]=e[r++],a[14]=e[r++],a[15]=e[r],a},d.clone=function(e,n){if(t.defined(e))return t.defined(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n):new d(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},d.fromArray=d.unpack,d.fromColumnMajorArray=function(e,t){return n.Check.defined("values",e),d.clone(e,t)},d.fromRowMajorArray=function(e,r){return n.Check.defined("values",e),t.defined(r)?(r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15],r):new d(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},d.fromRotationTranslation=function(e,r,c){return n.Check.typeOf.object("rotation",e),r=t.defaultValue(r,a.Cartesian3.ZERO),t.defined(c)?(c[0]=e[0],c[1]=e[1],c[2]=e[2],c[3]=0,c[4]=e[3],c[5]=e[4],c[6]=e[5],c[7]=0,c[8]=e[6],c[9]=e[7],c[10]=e[8],c[11]=0,c[12]=r.x,c[13]=r.y,c[14]=r.z,c[15]=1,c):new d(e[0],e[3],e[6],r.x,e[1],e[4],e[7],r.y,e[2],e[5],e[8],r.z,0,0,0,1)},d.fromTranslationQuaternionRotationScale=function(e,r,a,c){n.Check.typeOf.object("translation",e),n.Check.typeOf.object("rotation",r),n.Check.typeOf.object("scale",a),t.defined(c)||(c=new d);var u=a.x,o=a.y,i=a.z,f=r.x*r.x,h=r.x*r.y,s=r.x*r.z,l=r.x*r.w,y=r.y*r.y,p=r.y*r.z,C=r.y*r.w,O=r.z*r.z,b=r.z*r.w,m=r.w*r.w,k=f-y-O+m,x=2*(h-b),j=2*(s+C),w=2*(h+b),M=-f+y-O+m,z=2*(p-l),g=2*(s-C),v=2*(p+l),E=-f-y+O+m;return c[0]=k*u,c[1]=w*u,c[2]=g*u,c[3]=0,c[4]=x*o,c[5]=M*o,c[6]=v*o,c[7]=0,c[8]=j*i,c[9]=z*i,c[10]=E*i,c[11]=0,c[12]=e.x,c[13]=e.y,c[14]=e.z,c[15]=1,c},d.fromTranslationRotationScale=function(e,t){return n.Check.typeOf.object("translationRotationScale",e),d.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},d.fromTranslation=function(e,t){return n.Check.typeOf.object("translation",e),d.fromRotationTranslation(u.IDENTITY,e,t)},d.fromScale=function(e,r){return n.Check.typeOf.object("scale",e),t.defined(r)?(r[0]=e.x,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e.y,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e.z,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r):new d(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},d.fromUniformScale=function(e,r){return n.Check.typeOf.number("scale",e),t.defined(r)?(r[0]=e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r):new d(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var x=new a.Cartesian3,j=new a.Cartesian3,w=new a.Cartesian3;d.fromCamera=function(e,r){n.Check.typeOf.object("camera",e);var c=e.position,u=e.direction,o=e.up;n.Check.typeOf.object("camera.position",c),n.Check.typeOf.object("camera.direction",u),n.Check.typeOf.object("camera.up",o),a.Cartesian3.normalize(u,x),a.Cartesian3.normalize(a.Cartesian3.cross(x,o,j),j),a.Cartesian3.normalize(a.Cartesian3.cross(j,x,w),w);var i=j.x,f=j.y,h=j.z,s=x.x,l=x.y,y=x.z,p=w.x,C=w.y,O=w.z,b=c.x,m=c.y,k=c.z,M=i*-b+f*-m+h*-k,z=p*-b+C*-m+O*-k,g=s*b+l*m+y*k;return t.defined(r)?(r[0]=i,r[1]=p,r[2]=-s,r[3]=0,r[4]=f,r[5]=C,r[6]=-l,r[7]=0,r[8]=h,r[9]=O,r[10]=-y,r[11]=0,r[12]=M,r[13]=z,r[14]=g,r[15]=1,r):new d(i,f,h,M,p,C,O,z,-s,-l,-y,g,0,0,0,1)},d.computePerspectiveFieldOfView=function(e,t,r,a,c){n.Check.typeOf.number.greaterThan("fovY",e,0),n.Check.typeOf.number.lessThan("fovY",e,Math.PI),n.Check.typeOf.number.greaterThan("near",r,0),n.Check.typeOf.number.greaterThan("far",a,0),n.Check.typeOf.object("result",c);var u=1/Math.tan(.5*e),o=u/t,i=(a+r)/(r-a),f=2*a*r/(r-a);return c[0]=o,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=u,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=i,c[11]=-1,c[12]=0,c[13]=0,c[14]=f,c[15]=0,c},d.computeOrthographicOffCenter=function(e,t,r,a,c,u,o){n.Check.typeOf.number("left",e),n.Check.typeOf.number("right",t),n.Check.typeOf.number("bottom",r),n.Check.typeOf.number("top",a),n.Check.typeOf.number("near",c),n.Check.typeOf.number("far",u),n.Check.typeOf.object("result",o);var i=1/(t-e),f=1/(a-r),h=1/(u-c),s=-(t+e)*i,l=-(a+r)*f,y=-(u+c)*h;return i*=2,f*=2,h*=-2,o[0]=i,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=f,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=h,o[11]=0,o[12]=s,o[13]=l,o[14]=y,o[15]=1,o},d.computePerspectiveOffCenter=function(e,t,r,a,c,u,o){n.Check.typeOf.number("left",e),n.Check.typeOf.number("right",t),n.Check.typeOf.number("bottom",r),n.Check.typeOf.number("top",a),n.Check.typeOf.number("near",c),n.Check.typeOf.number("far",u),n.Check.typeOf.object("result",o);var i=2*c/(t-e),f=2*c/(a-r),h=(t+e)/(t-e),s=(a+r)/(a-r),l=-(u+c)/(u-c),y=-2*u*c/(u-c);return o[0]=i,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=f,o[6]=0,o[7]=0,o[8]=h,o[9]=s,o[10]=l,o[11]=-1,o[12]=0,o[13]=0,o[14]=y,o[15]=0,o},d.computeInfinitePerspectiveOffCenter=function(e,t,r,a,c,u){n.Check.typeOf.number("left",e),n.Check.typeOf.number("right",t),n.Check.typeOf.number("bottom",r),n.Check.typeOf.number("top",a),n.Check.typeOf.number("near",c),n.Check.typeOf.object("result",u);var o=2*c/(t-e),i=2*c/(a-r),f=(t+e)/(t-e),h=(a+r)/(a-r),s=-2*c;return u[0]=o,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=i,u[6]=0,u[7]=0,u[8]=f,u[9]=h,u[10]=-1,u[11]=-1,u[12]=0,u[13]=0,u[14]=s,u[15]=0,u},d.computeViewportTransformation=function(e,r,a,c){n.Check.typeOf.object("result",c),e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT);var u=t.defaultValue(e.x,0),o=t.defaultValue(e.y,0),i=t.defaultValue(e.width,0),f=t.defaultValue(e.height,0);r=t.defaultValue(r,0);var h=.5*i,s=.5*f,l=.5*((a=t.defaultValue(a,1))-r),y=h,p=s,C=l,O=u+h,b=o+s,m=r+l;return c[0]=y,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=p,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=C,c[11]=0,c[12]=O,c[13]=b,c[14]=m,c[15]=1,c},d.computeView=function(e,t,r,c,u){return n.Check.typeOf.object("position",e),n.Check.typeOf.object("direction",t),n.Check.typeOf.object("up",r),n.Check.typeOf.object("right",c),n.Check.typeOf.object("result",u),u[0]=c.x,u[1]=r.x,u[2]=-t.x,u[3]=0,u[4]=c.y,u[5]=r.y,u[6]=-t.y,u[7]=0,u[8]=c.z,u[9]=r.z,u[10]=-t.z,u[11]=0,u[12]=-a.Cartesian3.dot(c,e),u[13]=-a.Cartesian3.dot(r,e),u[14]=a.Cartesian3.dot(t,e),u[15]=1,u},d.toArray=function(e,r){return n.Check.typeOf.object("matrix",e),t.defined(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},d.getElementIndex=function(e,t){return n.Check.typeOf.number.greaterThanOrEquals("row",t,0),n.Check.typeOf.number.lessThanOrEquals("row",t,3),n.Check.typeOf.number.greaterThanOrEquals("column",e,0),n.Check.typeOf.number.lessThanOrEquals("column",e,3),4*e+t},d.getColumn=function(e,t,r){n.Check.typeOf.object("matrix",e),n.Check.typeOf.number.greaterThanOrEquals("index",t,0),n.Check.typeOf.number.lessThanOrEquals("index",t,3),n.Check.typeOf.object("result",r);var a=4*t,c=e[a],u=e[a+1],o=e[a+2],i=e[a+3];return r.x=c,r.y=u,r.z=o,r.w=i,r},d.setColumn=function(e,t,r,a){n.Check.typeOf.object("matrix",e),n.Check.typeOf.number.greaterThanOrEquals("index",t,0),n.Check.typeOf.number.lessThanOrEquals("index",t,3),n.Check.typeOf.object("cartesian",r),n.Check.typeOf.object("result",a);var c=4*t;return(a=d.clone(e,a))[c]=r.x,a[c+1]=r.y,a[c+2]=r.z,a[c+3]=r.w,a},d.setTranslation=function(e,t,r){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("translation",t),n.Check.typeOf.object("result",r),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=e[15],r};var M=new a.Cartesian3;d.setScale=function(e,t,r){n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("scale",t),n.Check.typeOf.object("result",r);var c=d.getScale(e,M),u=a.Cartesian3.divideComponents(t,c,M);return d.multiplyByScale(e,u,r)},d.getRow=function(e,t,r){n.Check.typeOf.object("matrix",e),n.Check.typeOf.number.greaterThanOrEquals("index",t,0),n.Check.typeOf.number.lessThanOrEquals("index",t,3),n.Check.typeOf.object("result",r);var a=e[t],c=e[t+4],u=e[t+8],o=e[t+12];return r.x=a,r.y=c,r.z=u,r.w=o,r},d.setRow=function(e,t,r,a){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.number.greaterThanOrEquals("index",t,0),n.Check.typeOf.number.lessThanOrEquals("index",t,3),n.Check.typeOf.object("cartesian",r),n.Check.typeOf.object("result",a),(a=d.clone(e,a))[t]=r.x,a[t+4]=r.y,a[t+8]=r.z,a[t+12]=r.w,a};var z=new a.Cartesian3;d.getScale=function(e,t){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("result",t),t.x=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[0],e[1],e[2],z)),t.y=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[4],e[5],e[6],z)),t.z=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[8],e[9],e[10],z)),t};var g=new a.Cartesian3;d.getMaximumScale=function(e){return d.getScale(e,g),a.Cartesian3.maximumComponent(g)},d.multiply=function(e,t,r){n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),n.Check.typeOf.object("result",r);var a=e[0],c=e[1],u=e[2],o=e[3],i=e[4],f=e[5],h=e[6],s=e[7],l=e[8],y=e[9],p=e[10],C=e[11],O=e[12],b=e[13],m=e[14],k=e[15],d=t[0],x=t[1],j=t[2],w=t[3],M=t[4],z=t[5],g=t[6],v=t[7],E=t[8],T=t[9],q=t[10],N=t[11],V=t[12],R=t[13],I=t[14],S=t[15],U=a*d+i*x+l*j+O*w,L=c*d+f*x+y*j+b*w,W=u*d+h*x+p*j+m*w,B=o*d+s*x+C*j+k*w,A=a*M+i*z+l*g+O*v,P=c*M+f*z+y*g+b*v,_=u*M+h*z+p*g+m*v,Y=o*M+s*z+C*g+k*v,Z=a*E+i*T+l*q+O*N,D=c*E+f*T+y*q+b*N,F=u*E+h*T+p*q+m*N,Q=o*E+s*T+C*q+k*N,X=a*V+i*R+l*I+O*S,G=c*V+f*R+y*I+b*S,H=u*V+h*R+p*I+m*S,J=o*V+s*R+C*I+k*S;return r[0]=U,r[1]=L,r[2]=W,r[3]=B,r[4]=A,r[5]=P,r[6]=_,r[7]=Y,r[8]=Z,r[9]=D,r[10]=F,r[11]=Q,r[12]=X,r[13]=G,r[14]=H,r[15]=J,r},d.add=function(e,t,r){return n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),n.Check.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r},d.subtract=function(e,t,r){return n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),n.Check.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r},d.multiplyTransformation=function(e,t,r){n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),n.Check.typeOf.object("result",r);var a=e[0],c=e[1],u=e[2],o=e[4],i=e[5],f=e[6],h=e[8],s=e[9],l=e[10],y=e[12],p=e[13],C=e[14],O=t[0],b=t[1],m=t[2],k=t[4],d=t[5],x=t[6],j=t[8],w=t[9],M=t[10],z=t[12],g=t[13],v=t[14],E=a*O+o*b+h*m,T=c*O+i*b+s*m,q=u*O+f*b+l*m,N=a*k+o*d+h*x,V=c*k+i*d+s*x,R=u*k+f*d+l*x,I=a*j+o*w+h*M,S=c*j+i*w+s*M,U=u*j+f*w+l*M,L=a*z+o*g+h*v+y,W=c*z+i*g+s*v+p,B=u*z+f*g+l*v+C;return r[0]=E,r[1]=T,r[2]=q,r[3]=0,r[4]=N,r[5]=V,r[6]=R,r[7]=0,r[8]=I,r[9]=S,r[10]=U,r[11]=0,r[12]=L,r[13]=W,r[14]=B,r[15]=1,r},d.multiplyByMatrix3=function(e,t,r){n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("rotation",t),n.Check.typeOf.object("result",r);var a=e[0],c=e[1],u=e[2],o=e[4],i=e[5],f=e[6],h=e[8],s=e[9],l=e[10],y=t[0],p=t[1],C=t[2],O=t[3],b=t[4],m=t[5],k=t[6],d=t[7],x=t[8],j=a*y+o*p+h*C,w=c*y+i*p+s*C,M=u*y+f*p+l*C,z=a*O+o*b+h*m,g=c*O+i*b+s*m,v=u*O+f*b+l*m,E=a*k+o*d+h*x,T=c*k+i*d+s*x,q=u*k+f*d+l*x;return r[0]=j,r[1]=w,r[2]=M,r[3]=0,r[4]=z,r[5]=g,r[6]=v,r[7]=0,r[8]=E,r[9]=T,r[10]=q,r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},d.multiplyByTranslation=function(e,t,r){n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("translation",t),n.Check.typeOf.object("result",r);var a=t.x,c=t.y,u=t.z,o=a*e[0]+c*e[4]+u*e[8]+e[12],i=a*e[1]+c*e[5]+u*e[9]+e[13],f=a*e[2]+c*e[6]+u*e[10]+e[14];return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=o,r[13]=i,r[14]=f,r[15]=e[15],r};var v=new a.Cartesian3;d.multiplyByUniformScale=function(e,t,r){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.number("scale",t),n.Check.typeOf.object("result",r),v.x=t,v.y=t,v.z=t,d.multiplyByScale(e,v,r)},d.multiplyByScale=function(e,t,r){n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("scale",t),n.Check.typeOf.object("result",r);var a=t.x,c=t.y,u=t.z;return 1===a&&1===c&&1===u?d.clone(e,r):(r[0]=a*e[0],r[1]=a*e[1],r[2]=a*e[2],r[3]=0,r[4]=c*e[4],r[5]=c*e[5],r[6]=c*e[6],r[7]=0,r[8]=u*e[8],r[9]=u*e[9],r[10]=u*e[10],r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=1,r)},d.multiplyByVector=function(e,t,r){n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("cartesian",t),n.Check.typeOf.object("result",r);var a=t.x,c=t.y,u=t.z,o=t.w,i=e[0]*a+e[4]*c+e[8]*u+e[12]*o,f=e[1]*a+e[5]*c+e[9]*u+e[13]*o,h=e[2]*a+e[6]*c+e[10]*u+e[14]*o,s=e[3]*a+e[7]*c+e[11]*u+e[15]*o;return r.x=i,r.y=f,r.z=h,r.w=s,r},d.multiplyByPointAsVector=function(e,t,r){n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("cartesian",t),n.Check.typeOf.object("result",r);var a=t.x,c=t.y,u=t.z,o=e[0]*a+e[4]*c+e[8]*u,i=e[1]*a+e[5]*c+e[9]*u,f=e[2]*a+e[6]*c+e[10]*u;return r.x=o,r.y=i,r.z=f,r},d.multiplyByPoint=function(e,t,r){n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("cartesian",t),n.Check.typeOf.object("result",r);var a=t.x,c=t.y,u=t.z,o=e[0]*a+e[4]*c+e[8]*u+e[12],i=e[1]*a+e[5]*c+e[9]*u+e[13],f=e[2]*a+e[6]*c+e[10]*u+e[14];return r.x=o,r.y=i,r.z=f,r},d.multiplyByScalar=function(e,t,r){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.number("scalar",t),n.Check.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r},d.negate=function(e,t){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},d.transpose=function(e,t){n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("result",t);var r=e[1],a=e[2],c=e[3],u=e[6],o=e[7],i=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=a,t[9]=u,t[10]=e[10],t[11]=e[14],t[12]=c,t[13]=o,t[14]=i,t[15]=e[15],t},d.abs=function(e,t){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},d.equals=function(e,n){return e===n||t.defined(e)&&t.defined(n)&&e[12]===n[12]&&e[13]===n[13]&&e[14]===n[14]&&e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[8]===n[8]&&e[9]===n[9]&&e[10]===n[10]&&e[3]===n[3]&&e[7]===n[7]&&e[11]===n[11]&&e[15]===n[15]},d.equalsEpsilon=function(e,r,a){return n.Check.typeOf.number("epsilon",a),e===r||t.defined(e)&&t.defined(r)&&Math.abs(e[0]-r[0])<=a&&Math.abs(e[1]-r[1])<=a&&Math.abs(e[2]-r[2])<=a&&Math.abs(e[3]-r[3])<=a&&Math.abs(e[4]-r[4])<=a&&Math.abs(e[5]-r[5])<=a&&Math.abs(e[6]-r[6])<=a&&Math.abs(e[7]-r[7])<=a&&Math.abs(e[8]-r[8])<=a&&Math.abs(e[9]-r[9])<=a&&Math.abs(e[10]-r[10])<=a&&Math.abs(e[11]-r[11])<=a&&Math.abs(e[12]-r[12])<=a&&Math.abs(e[13]-r[13])<=a&&Math.abs(e[14]-r[14])<=a&&Math.abs(e[15]-r[15])<=a},d.getTranslation=function(e,t){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("result",t),t.x=e[12],t.y=e[13],t.z=e[14],t},d.getRotation=function(e,t){return n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("result",t),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var E=new u,T=new u,q=new C,N=new C(0,0,0,1);d.inverse=function(e,t){n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("result",t);var a=e[0],o=e[4],i=e[8],f=e[12],h=e[1],s=e[5],l=e[9],y=e[13],p=e[2],O=e[6],b=e[10],m=e[14],k=e[3],x=e[7],j=e[11],w=e[15],M=b*w,z=m*j,g=O*w,v=m*x,V=O*j,R=b*x,I=p*w,S=m*k,U=p*j,L=b*k,W=p*x,B=O*k,A=M*s+v*l+V*y-(z*s+g*l+R*y),P=z*h+I*l+L*y-(M*h+S*l+U*y),_=g*h+S*s+W*y-(v*h+I*s+B*y),Y=R*h+U*s+B*l-(V*h+L*s+W*l),Z=z*o+g*i+R*f-(M*o+v*i+V*f),D=M*a+S*i+U*f-(z*a+I*i+L*f),F=v*a+I*o+B*f-(g*a+S*o+W*f),Q=V*a+L*o+W*i-(R*a+U*o+B*i),X=(M=i*y)*x+(v=f*s)*j+(V=o*l)*w-((z=f*l)*x+(g=o*y)*j+(R=i*s)*w),G=z*k+(I=a*y)*j+(L=i*h)*w-(M*k+(S=f*h)*j+(U=a*l)*w),H=g*k+S*x+(W=a*s)*w-(v*k+I*x+(B=o*h)*w),J=R*k+U*x+B*j-(V*k+L*x+W*j),K=g*b+R*m+z*O-(V*m+M*O+v*b),$=U*m+M*p+S*b-(I*b+L*m+z*p),ee=I*O+B*m+v*p-(W*m+g*p+S*O),te=W*b+V*p+L*O-(U*O+B*b+R*p),ne=a*A+o*P+i*_+f*Y;if(Math.abs(ne)<r.CesiumMath.EPSILON21){if(u.equalsEpsilon(d.getRotation(e,E),T,r.CesiumMath.EPSILON7)&&C.equals(d.getRow(e,3,q),N))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new c.RuntimeError("matrix is not invertible because its determinate is zero.")}return ne=1/ne,t[0]=A*ne,t[1]=P*ne,t[2]=_*ne,t[3]=Y*ne,t[4]=Z*ne,t[5]=D*ne,t[6]=F*ne,t[7]=Q*ne,t[8]=X*ne,t[9]=G*ne,t[10]=H*ne,t[11]=J*ne,t[12]=K*ne,t[13]=$*ne,t[14]=ee*ne,t[15]=te*ne,t},d.inverseTransformation=function(e,t){n.Check.typeOf.object("matrix",e),n.Check.typeOf.object("result",t);var r=e[0],a=e[1],c=e[2],u=e[4],o=e[5],i=e[6],f=e[8],h=e[9],s=e[10],l=e[12],y=e[13],p=e[14],C=-r*l-a*y-c*p,O=-u*l-o*y-i*p,b=-f*l-h*y-s*p;return t[0]=r,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=o,t[6]=h,t[7]=0,t[8]=c,t[9]=i,t[10]=s,t[11]=0,t[12]=C,t[13]=O,t[14]=b,t[15]=1,t},d.IDENTITY=t.freezeObject(new d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),d.ZERO=t.freezeObject(new d(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),d.COLUMN0ROW0=0,d.COLUMN0ROW1=1,d.COLUMN0ROW2=2,d.COLUMN0ROW3=3,d.COLUMN1ROW0=4,d.COLUMN1ROW1=5,d.COLUMN1ROW2=6,d.COLUMN1ROW3=7,d.COLUMN2ROW0=8,d.COLUMN2ROW1=9,d.COLUMN2ROW2=10,d.COLUMN2ROW3=11,d.COLUMN3ROW0=12,d.COLUMN3ROW1=13,d.COLUMN3ROW2=14,d.COLUMN3ROW3=15,r.defineProperties(d.prototype,{length:{get:function(){return d.packedLength}}}),d.prototype.clone=function(e){return d.clone(this,e)},d.prototype.equals=function(e){return d.equals(this,e)},d.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]&&e[9]===t[n+9]&&e[10]===t[n+10]&&e[11]===t[n+11]&&e[12]===t[n+12]&&e[13]===t[n+13]&&e[14]===t[n+14]&&e[15]===t[n+15]},d.prototype.equalsEpsilon=function(e,t){return d.equalsEpsilon(this,e,t)},d.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"},e.Cartesian4=C,e.Matrix3=u,e.Matrix4=d}));

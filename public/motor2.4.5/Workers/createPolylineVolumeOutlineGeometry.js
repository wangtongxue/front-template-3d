define(["./when-7ef6387a","./Check-ed6a1804","./Math-85667bf9","./Ellipsoid-1cbb4ac9","./Transforms-c20c38d0","./RuntimeError-5b606d78","./Cartesian2-73569d25","./WebGLConstants-30fc6f5c","./ComponentDatatype-a863af81","./GeometryAttribute-6b3c7112","./GeometryAttributes-cb18da36","./IndexDatatype-f12d39b5","./IntersectionTests-faaebeeb","./Plane-6ff6c057","./arrayRemoveDuplicates-9458abce","./BoundingRectangle-41c90928","./EllipsoidTangentPlane-13a4f7fd","./EllipsoidRhumbLine-01425f3c","./PolygonPipeline-5110db34","./PolylineVolumeGeometryLibrary-7075293a","./EllipsoidGeodesic-2bb1f4ee","./PolylinePipeline-2458e977"],(function(e,i,r,n,t,o,a,l,s,p,d,u,c,y,f,h,g,v,m,E,P,b){"use strict";function _(t){var o=(t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT)).polylinePositions,l=t.shapePositions;if(!e.defined(o))throw new i.DeveloperError("options.polylinePositions is required.");if(!e.defined(l))throw new i.DeveloperError("options.shapePositions is required.");this._positions=o,this._shape=l,this._ellipsoid=n.Ellipsoid.clone(e.defaultValue(t.ellipsoid,n.Ellipsoid.WGS84)),this._cornerType=e.defaultValue(t.cornerType,E.CornerType.ROUNDED),this._granularity=e.defaultValue(t.granularity,r.CesiumMath.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry";var s=1+o.length*n.Cartesian3.packedLength;s+=1+l.length*a.Cartesian2.packedLength,this.packedLength=s+n.Ellipsoid.packedLength+2}_.pack=function(r,t,o){if(!e.defined(r))throw new i.DeveloperError("value is required");if(!e.defined(t))throw new i.DeveloperError("array is required");var l;o=e.defaultValue(o,0);var s=r._positions,p=s.length;for(t[o++]=p,l=0;l<p;++l,o+=n.Cartesian3.packedLength)n.Cartesian3.pack(s[l],t,o);var d=r._shape;for(p=d.length,t[o++]=p,l=0;l<p;++l,o+=a.Cartesian2.packedLength)a.Cartesian2.pack(d[l],t,o);return n.Ellipsoid.pack(r._ellipsoid,t,o),o+=n.Ellipsoid.packedLength,t[o++]=r._cornerType,t[o]=r._granularity,t};var k=n.Ellipsoid.clone(n.Ellipsoid.UNIT_SPHERE),C={polylinePositions:void 0,shapePositions:void 0,ellipsoid:k,height:void 0,cornerType:void 0,granularity:void 0};_.unpack=function(r,t,o){if(!e.defined(r))throw new i.DeveloperError("array is required");var l;t=e.defaultValue(t,0);var s=r[t++],p=new Array(s);for(l=0;l<s;++l,t+=n.Cartesian3.packedLength)p[l]=n.Cartesian3.unpack(r,t);s=r[t++];var d=new Array(s);for(l=0;l<s;++l,t+=a.Cartesian2.packedLength)d[l]=a.Cartesian2.unpack(r,t);var u=n.Ellipsoid.unpack(r,t,k);t+=n.Ellipsoid.packedLength;var c=r[t++],y=r[t];return e.defined(o)?(o._positions=p,o._shape=d,o._ellipsoid=n.Ellipsoid.clone(u,o._ellipsoid),o._cornerType=c,o._granularity=y,o):(C.polylinePositions=p,C.shapePositions=d,C.cornerType=c,C.granularity=y,new _(C))};var D=new h.BoundingRectangle;return _.createGeometry=function(e){var i=e._positions,r=f.arrayRemoveDuplicates(i,n.Cartesian3.equalsEpsilon),o=e._shape;if(o=E.PolylineVolumeGeometryLibrary.removeDuplicatesFromShape(o),!(r.length<2||o.length<3)){m.PolygonPipeline.computeWindingOrder2D(o)===m.WindingOrder.CLOCKWISE&&o.reverse();var a=h.BoundingRectangle.fromPoints(o,D);return function(e,i){var r=new d.GeometryAttributes;r.position=new p.GeometryAttribute({componentDatatype:s.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:e});var n,o,a=i.length,l=r.position.values.length/3,c=e.length/3/a,y=u.IndexDatatype.createTypedArray(l,2*a*(c+1)),f=0,h=(n=0)*a;for(o=0;o<a-1;o++)y[f++]=o+h,y[f++]=o+h+1;for(y[f++]=a-1+h,y[f++]=h,h=(n=c-1)*a,o=0;o<a-1;o++)y[f++]=o+h,y[f++]=o+h+1;for(y[f++]=a-1+h,y[f++]=h,n=0;n<c-1;n++){var g=a*n,v=g+a;for(o=0;o<a;o++)y[f++]=o+g,y[f++]=o+v}return new p.Geometry({attributes:r,indices:u.IndexDatatype.createTypedArray(l,y),boundingSphere:t.BoundingSphere.fromVertices(e),primitiveType:p.PrimitiveType.LINES})}(E.PolylineVolumeGeometryLibrary.computePositions(r,o,a,e,!1),o)}},function(i,r){return e.defined(r)&&(i=_.unpack(i,r)),i._ellipsoid=n.Ellipsoid.clone(i._ellipsoid),_.createGeometry(i)}}));
//# sourceMappingURL=createPolylineVolumeOutlineGeometry.js.map

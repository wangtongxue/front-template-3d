define(["exports","./Math-55f9392d","./Ellipsoid-911f8bc2","./Transforms-d8f9dcbd"],(function(a,r,e,i){"use strict";var t={},n=new e.Cartesian3,s=new e.Cartesian3,o=new i.Quaternion,l=new i.Matrix3;function C(a,r,t,C,y,u,m,c,h,x){var M=a+r;e.Cartesian3.multiplyByScalar(C,Math.cos(M),n),e.Cartesian3.multiplyByScalar(t,Math.sin(M),s),e.Cartesian3.add(n,s,n);var f=Math.cos(a);f*=f;var d=Math.sin(a);d*=d;var z=u/Math.sqrt(m*f+y*d)/c;return i.Quaternion.fromAxisAngle(n,z,o),i.Matrix3.fromQuaternion(o,l),i.Matrix3.multiplyByVector(l,h,x),e.Cartesian3.normalize(x,x),e.Cartesian3.multiplyByScalar(x,c,x),x}var y=new e.Cartesian3,u=new e.Cartesian3,m=new e.Cartesian3,c=new e.Cartesian3;t.raisePositionsToHeight=function(a,r,i){for(var t=r.ellipsoid,n=r.height,s=r.extrudedHeight,o=i?a.length/3*2:a.length/3,l=new Float64Array(3*o),C=a.length,h=i?C:0,x=0;x<C;x+=3){var M=x+1,f=x+2,d=e.Cartesian3.fromArray(a,x,y);t.scaleToGeodeticSurface(d,d);var z=e.Cartesian3.clone(d,u),_=t.geodeticSurfaceNormal(d,c),v=e.Cartesian3.multiplyByScalar(_,n,m);e.Cartesian3.add(d,v,d),i&&(e.Cartesian3.multiplyByScalar(_,s,v),e.Cartesian3.add(z,v,z),l[x+h]=z.x,l[M+h]=z.y,l[f+h]=z.z),l[x]=d.x,l[M]=d.y,l[f]=d.z}return l};var h=new e.Cartesian3,x=new e.Cartesian3,M=new e.Cartesian3;t.computeEllipsePositions=function(a,i,t){var n=a.semiMinorAxis,s=a.semiMajorAxis,o=a.rotation,l=a.center,c=8*a.granularity,f=n*n,d=s*s,z=s*n,_=e.Cartesian3.magnitude(l),v=e.Cartesian3.normalize(l,h),O=e.Cartesian3.cross(e.Cartesian3.UNIT_Z,l,x);O=e.Cartesian3.normalize(O,O);var p=e.Cartesian3.cross(v,O,M),w=1+Math.ceil(r.CesiumMath.PI_OVER_TWO/c),P=r.CesiumMath.PI_OVER_TWO/(w-1),T=r.CesiumMath.PI_OVER_TWO-w*P;T<0&&(w-=Math.ceil(Math.abs(T)/P));var E,I,g,V,A,R=i?new Array(3*(w*(w+2)*2)):void 0,W=0,S=y,B=u,b=4*w*3,Q=b-1,G=0,H=t?new Array(b):void 0;for(S=C(T=r.CesiumMath.PI_OVER_TWO,o,p,O,f,z,d,_,v,S),i&&(R[W++]=S.x,R[W++]=S.y,R[W++]=S.z),t&&(H[Q--]=S.z,H[Q--]=S.y,H[Q--]=S.x),T=r.CesiumMath.PI_OVER_TWO-P,E=1;E<w+1;++E){if(S=C(T,o,p,O,f,z,d,_,v,S),B=C(Math.PI-T,o,p,O,f,z,d,_,v,B),i){for(R[W++]=S.x,R[W++]=S.y,R[W++]=S.z,g=2*E+2,I=1;I<g-1;++I)V=I/(g-1),A=e.Cartesian3.lerp(S,B,V,m),R[W++]=A.x,R[W++]=A.y,R[W++]=A.z;R[W++]=B.x,R[W++]=B.y,R[W++]=B.z}t&&(H[Q--]=S.z,H[Q--]=S.y,H[Q--]=S.x,H[G++]=B.x,H[G++]=B.y,H[G++]=B.z),T=r.CesiumMath.PI_OVER_TWO-(E+1)*P}for(E=w;E>1;--E){if(S=C(-(T=r.CesiumMath.PI_OVER_TWO-(E-1)*P),o,p,O,f,z,d,_,v,S),B=C(T+Math.PI,o,p,O,f,z,d,_,v,B),i){for(R[W++]=S.x,R[W++]=S.y,R[W++]=S.z,g=2*(E-1)+2,I=1;I<g-1;++I)V=I/(g-1),A=e.Cartesian3.lerp(S,B,V,m),R[W++]=A.x,R[W++]=A.y,R[W++]=A.z;R[W++]=B.x,R[W++]=B.y,R[W++]=B.z}t&&(H[Q--]=S.z,H[Q--]=S.y,H[Q--]=S.x,H[G++]=B.x,H[G++]=B.y,H[G++]=B.z)}S=C(-(T=r.CesiumMath.PI_OVER_TWO),o,p,O,f,z,d,_,v,S);var N={};return i&&(R[W++]=S.x,R[W++]=S.y,R[W++]=S.z,N.positions=R,N.numPts=w),t&&(H[Q--]=S.z,H[Q--]=S.y,H[Q--]=S.x,N.outerPositions=H),N},a.EllipseGeometryLibrary=t}));
//# sourceMappingURL=EllipseGeometryLibrary-20fd67d7.js.map

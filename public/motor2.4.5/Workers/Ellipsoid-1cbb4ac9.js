define(["exports","./when-7ef6387a","./Check-ed6a1804","./Math-85667bf9"],(function(e,t,r,n){"use strict";function i(e,r,n){this.x=t.defaultValue(e,0),this.y=t.defaultValue(r,0),this.z=t.defaultValue(n,0)}i.fromSpherical=function(e,n){r.Check.typeOf.object("spherical",e),t.defined(n)||(n=new i);var a=e.clock,o=e.cone,u=t.defaultValue(e.magnitude,1),c=u*Math.sin(o);return n.x=c*Math.cos(a),n.y=c*Math.sin(a),n.z=u*Math.cos(o),n},i.fromElements=function(e,r,n,a){return t.defined(a)?(a.x=e,a.y=r,a.z=n,a):new i(e,r,n)},i.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.x=e.x,r.y=e.y,r.z=e.z,r):new i(e.x,e.y,e.z)},i.fromCartesian4=i.clone,i.packedLength=3,i.pack=function(e,n,i){return r.Check.typeOf.object("value",e),r.Check.defined("array",n),i=t.defaultValue(i,0),n[i++]=e.x,n[i++]=e.y,n[i]=e.z,n},i.unpack=function(e,n,a){return r.Check.defined("array",e),n=t.defaultValue(n,0),t.defined(a)||(a=new i),a.x=e[n++],a.y=e[n++],a.z=e[n],a},i.packArray=function(e,n){r.Check.defined("array",e);var a=e.length,o=3*a;if(t.defined(n)){if(!Array.isArray(n)&&n.length!==o)throw new r.DeveloperError("If result is a typed array, it must have exactly array.length * 3 elements");n.length!==o&&(n.length=o)}else n=new Array(o);for(var u=0;u<a;++u)i.pack(e[u],n,3*u);return n},i.unpackArray=function(e,n){if(r.Check.defined("array",e),r.Check.typeOf.number.greaterThanOrEquals("array.length",e.length,3),e.length%3!=0)throw new r.DeveloperError("array length must be a multiple of 3.");var a=e.length;t.defined(n)?n.length=a/3:n=new Array(a/3);for(var o=0;o<a;o+=3){var u=o/3;n[u]=i.unpack(e,o,n[u])}return n},i.fromArray=i.unpack,i.maximumComponent=function(e){return r.Check.typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z)},i.minimumComponent=function(e){return r.Check.typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z)},i.minimumByComponent=function(e,t,n){return r.Check.typeOf.object("first",e),r.Check.typeOf.object("second",t),r.Check.typeOf.object("result",n),n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n},i.maximumByComponent=function(e,t,n){return r.Check.typeOf.object("first",e),r.Check.typeOf.object("second",t),r.Check.typeOf.object("result",n),n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n},i.magnitudeSquared=function(e){return r.Check.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z},i.magnitude=function(e){return Math.sqrt(i.magnitudeSquared(e))};var a=new i;i.distance=function(e,t){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),i.subtract(e,t,a),i.magnitude(a)},i.distanceSquared=function(e,t){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),i.subtract(e,t,a),i.magnitudeSquared(a)},i.normalize=function(e,t){r.Check.typeOf.object("cartesian",e),r.Check.typeOf.object("result",t);var n=i.magnitude(e);if(t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,isNaN(t.x)||isNaN(t.y)||isNaN(t.z))throw new r.DeveloperError("normalized result is not a number");return t},i.dot=function(e,t){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z},i.multiplyComponents=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n},i.divideComponents=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n},i.add=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n},i.subtract=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n},i.multiplyByScalar=function(e,t,n){return r.Check.typeOf.object("cartesian",e),r.Check.typeOf.number("scalar",t),r.Check.typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n},i.divideByScalar=function(e,t,n){return r.Check.typeOf.object("cartesian",e),r.Check.typeOf.number("scalar",t),r.Check.typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n},i.negate=function(e,t){return r.Check.typeOf.object("cartesian",e),r.Check.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t},i.abs=function(e,t){return r.Check.typeOf.object("cartesian",e),r.Check.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};var o=new i;i.lerp=function(e,t,n,a){return r.Check.typeOf.object("start",e),r.Check.typeOf.object("end",t),r.Check.typeOf.number("t",n),r.Check.typeOf.object("result",a),i.multiplyByScalar(t,n,o),a=i.multiplyByScalar(e,1-n,a),i.add(o,a,a)};var u=new i,c=new i;i.angleBetween=function(e,t){r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),i.normalize(e,u),i.normalize(t,c);var n=i.dot(u,c),a=i.magnitude(i.cross(u,c,u));return Math.atan2(a,n)};var d=new i;i.mostOrthogonalAxis=function(e,t){r.Check.typeOf.object("cartesian",e),r.Check.typeOf.object("result",t);var n=i.normalize(e,d);return i.abs(n,n),t=n.x<=n.y?n.x<=n.z?i.clone(i.UNIT_X,t):i.clone(i.UNIT_Z,t):n.y<=n.z?i.clone(i.UNIT_Y,t):i.clone(i.UNIT_Z,t)},i.projectVector=function(e,t,n){r.Check.defined("a",e),r.Check.defined("b",t),r.Check.defined("result",n);var a=i.dot(e,t)/i.dot(t,t);return i.multiplyByScalar(t,a,n)},i.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.x===r.x&&e.y===r.y&&e.z===r.z},i.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]},i.equalsEpsilon=function(e,r,i,a){return e===r||t.defined(e)&&t.defined(r)&&n.CesiumMath.equalsEpsilon(e.x,r.x,i,a)&&n.CesiumMath.equalsEpsilon(e.y,r.y,i,a)&&n.CesiumMath.equalsEpsilon(e.z,r.z,i,a)},i.cross=function(e,t,n){r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n);var i=e.x,a=e.y,o=e.z,u=t.x,c=t.y,d=t.z,f=a*d-o*c,h=o*u-i*d,l=i*c-a*u;return n.x=f,n.y=h,n.z=l,n},i.midpoint=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y),n.z=.5*(e.z+t.z),n},i.fromDegrees=function(e,t,a,o,u){return r.Check.typeOf.number("longitude",e),r.Check.typeOf.number("latitude",t),e=n.CesiumMath.toRadians(e),t=n.CesiumMath.toRadians(t),i.fromRadians(e,t,a,o,u)};var f=new i,h=new i,l=new i(40680631590769,40680631590769,40408299984661.445);i.fromRadians=function(e,n,a,o,u){r.Check.typeOf.number("longitude",e),r.Check.typeOf.number("latitude",n),a=t.defaultValue(a,0);var c=t.defined(o)?o.radiiSquared:l,d=Math.cos(n);f.x=d*Math.cos(e),f.y=d*Math.sin(e),f.z=Math.sin(n),f=i.normalize(f,f),i.multiplyComponents(c,f,h);var s=Math.sqrt(i.dot(f,h));return h=i.divideByScalar(h,s,h),f=i.multiplyByScalar(f,a,f),t.defined(u)||(u=new i),i.add(h,f,u)},i.fromDegreesArray=function(e,n,a){if(r.Check.defined("coordinates",e),e.length<2||e.length%2!=0)throw new r.DeveloperError("the number of coordinates must be a multiple of 2 and at least 2");var o=e.length;t.defined(a)?a.length=o/2:a=new Array(o/2);for(var u=0;u<o;u+=2){var c=e[u],d=e[u+1],f=u/2;a[f]=i.fromDegrees(c,d,0,n,a[f])}return a},i.fromRadiansArray=function(e,n,a){if(r.Check.defined("coordinates",e),e.length<2||e.length%2!=0)throw new r.DeveloperError("the number of coordinates must be a multiple of 2 and at least 2");var o=e.length;t.defined(a)?a.length=o/2:a=new Array(o/2);for(var u=0;u<o;u+=2){var c=e[u],d=e[u+1],f=u/2;a[f]=i.fromRadians(c,d,0,n,a[f])}return a},i.fromDegreesArrayHeights=function(e,n,a){if(r.Check.defined("coordinates",e),e.length<3||e.length%3!=0)throw new r.DeveloperError("the number of coordinates must be a multiple of 3 and at least 3");var o=e.length;t.defined(a)?a.length=o/3:a=new Array(o/3);for(var u=0;u<o;u+=3){var c=e[u],d=e[u+1],f=e[u+2],h=u/3;a[h]=i.fromDegrees(c,d,f,n,a[h])}return a},i.fromRadiansArrayHeights=function(e,n,a){if(r.Check.defined("coordinates",e),e.length<3||e.length%3!=0)throw new r.DeveloperError("the number of coordinates must be a multiple of 3 and at least 3");var o=e.length;t.defined(a)?a.length=o/3:a=new Array(o/3);for(var u=0;u<o;u+=3){var c=e[u],d=e[u+1],f=e[u+2],h=u/3;a[h]=i.fromRadians(c,d,f,n,a[h])}return a},i.ZERO=Object.freeze(new i(0,0,0)),i.UNIT_X=Object.freeze(new i(1,0,0)),i.UNIT_Y=Object.freeze(new i(0,1,0)),i.UNIT_Z=Object.freeze(new i(0,0,1)),i.prototype.clone=function(e){return i.clone(this,e)},i.prototype.equals=function(e){return i.equals(this,e)},i.prototype.equalsEpsilon=function(e,t,r){return i.equalsEpsilon(this,e,t,r)},i.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};var s=new i,y=new i;function p(e,a,o,u,c){if(!t.defined(e))throw new r.DeveloperError("cartesian is required.");if(!t.defined(a))throw new r.DeveloperError("oneOverRadii is required.");if(!t.defined(o))throw new r.DeveloperError("oneOverRadiiSquared is required.");if(!t.defined(u))throw new r.DeveloperError("centerToleranceSquared is required.");var d=e.x,f=e.y,h=e.z,l=a.x,p=a.y,m=a.z,g=d*d*l*l,C=f*f*p*p,O=h*h*m*m,b=g+C+O,v=Math.sqrt(1/b),k=i.multiplyByScalar(e,v,s);if(b<u)return isFinite(v)?i.clone(k,c):void 0;var z=o.x,x=o.y,w=o.z,S=y;S.x=k.x*z*2,S.y=k.y*x*2,S.z=k.z*w*2;var _,q,j,M,R,T,E,A=(1-v)*i.magnitude(e)/(.5*i.magnitude(S)),N=0;do{N=(_=g*(R=(q=1/(1+(A-=N)*z))*q)+C*(T=(j=1/(1+A*x))*j)+O*(E=(M=1/(1+A*w))*M)-1)/(-2*(g*(R*q)*z+C*(T*j)*x+O*(E*M)*w))}while(Math.abs(_)>n.CesiumMath.EPSILON12);return t.defined(c)?(c.x=d*q,c.y=f*j,c.z=h*M,c):new i(d*q,f*j,h*M)}function m(e,r,n){this.longitude=t.defaultValue(e,0),this.latitude=t.defaultValue(r,0),this.height=t.defaultValue(n,0)}m.fromRadians=function(e,n,i,a){return r.Check.typeOf.number("longitude",e),r.Check.typeOf.number("latitude",n),i=t.defaultValue(i,0),t.defined(a)?(a.longitude=e,a.latitude=n,a.height=i,a):new m(e,n,i)},m.fromDegrees=function(e,t,i,a){return r.Check.typeOf.number("longitude",e),r.Check.typeOf.number("latitude",t),e=n.CesiumMath.toRadians(e),t=n.CesiumMath.toRadians(t),m.fromRadians(e,t,i,a)};var g=new i,C=new i,O=new i,b=new i(1/6378137,1/6378137,1/6356752.314245179),v=new i(1/40680631590769,1/40680631590769,1/40408299984661.445),k=n.CesiumMath.EPSILON1;function z(e,a,o,u){a=t.defaultValue(a,0),o=t.defaultValue(o,0),u=t.defaultValue(u,0),r.Check.typeOf.number.greaterThanOrEquals("x",a,0),r.Check.typeOf.number.greaterThanOrEquals("y",o,0),r.Check.typeOf.number.greaterThanOrEquals("z",u,0),e._radii=new i(a,o,u),e._radiiSquared=new i(a*a,o*o,u*u),e._radiiToTheFourth=new i(a*a*a*a,o*o*o*o,u*u*u*u),e._oneOverRadii=new i(0===a?0:1/a,0===o?0:1/o,0===u?0:1/u),e._oneOverRadiiSquared=new i(0===a?0:1/(a*a),0===o?0:1/(o*o),0===u?0:1/(u*u)),e._minimumRadius=Math.min(a,o,u),e._maximumRadius=Math.max(a,o,u),e._centerToleranceSquared=n.CesiumMath.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function x(e,t,r){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,z(this,e,t,r)}m.fromCartesian=function(e,r,a){var o=t.defined(r)?r.oneOverRadii:b,u=t.defined(r)?r.oneOverRadiiSquared:v,c=p(e,o,u,t.defined(r)?r._centerToleranceSquared:k,C);if(t.defined(c)){var d=i.multiplyComponents(c,u,g);d=i.normalize(d,d);var f=i.subtract(e,c,O),h=Math.atan2(d.y,d.x),l=Math.asin(d.z),s=n.CesiumMath.sign(i.dot(f,e))*i.magnitude(f);return t.defined(a)?(a.longitude=h,a.latitude=l,a.height=s,a):new m(h,l,s)}},m.toCartesian=function(e,t,n){return r.Check.defined("cartographic",e),i.fromRadians(e.longitude,e.latitude,e.height,t,n)},m.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.longitude=e.longitude,r.latitude=e.latitude,r.height=e.height,r):new m(e.longitude,e.latitude,e.height)},m.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.longitude===r.longitude&&e.latitude===r.latitude&&e.height===r.height},m.equalsEpsilon=function(e,n,i){return r.Check.typeOf.number("epsilon",i),e===n||t.defined(e)&&t.defined(n)&&Math.abs(e.longitude-n.longitude)<=i&&Math.abs(e.latitude-n.latitude)<=i&&Math.abs(e.height-n.height)<=i},m.ZERO=Object.freeze(new m(0,0,0)),m.prototype.clone=function(e){return m.clone(this,e)},m.prototype.equals=function(e){return m.equals(this,e)},m.prototype.equalsEpsilon=function(e,t){return m.equalsEpsilon(this,e,t)},m.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},Object.defineProperties(x.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),x.clone=function(e,r){if(t.defined(e)){var n=e._radii;return t.defined(r)?(i.clone(n,r._radii),i.clone(e._radiiSquared,r._radiiSquared),i.clone(e._radiiToTheFourth,r._radiiToTheFourth),i.clone(e._oneOverRadii,r._oneOverRadii),i.clone(e._oneOverRadiiSquared,r._oneOverRadiiSquared),r._minimumRadius=e._minimumRadius,r._maximumRadius=e._maximumRadius,r._centerToleranceSquared=e._centerToleranceSquared,r):new x(n.x,n.y,n.z)}},x.fromCartesian3=function(e,r){return t.defined(r)||(r=new x),t.defined(e)?(z(r,e.x,e.y,e.z),r):r},x.WGS84=Object.freeze(new x(6378137,6378137,6356752.314245179)),x.UNIT_SPHERE=Object.freeze(new x(1,1,1)),x.MOON=Object.freeze(new x(n.CesiumMath.LUNAR_RADIUS,n.CesiumMath.LUNAR_RADIUS,n.CesiumMath.LUNAR_RADIUS)),x.prototype.clone=function(e){return x.clone(this,e)},x.packedLength=i.packedLength,x.pack=function(e,n,a){return r.Check.typeOf.object("value",e),r.Check.defined("array",n),a=t.defaultValue(a,0),i.pack(e._radii,n,a),n},x.unpack=function(e,n,a){r.Check.defined("array",e),n=t.defaultValue(n,0);var o=i.unpack(e,n);return x.fromCartesian3(o,a)},x.prototype.geocentricSurfaceNormal=i.normalize,x.prototype.geodeticSurfaceNormalCartographic=function(e,n){r.Check.typeOf.object("cartographic",e);var a=e.longitude,o=e.latitude,u=Math.cos(o),c=u*Math.cos(a),d=u*Math.sin(a),f=Math.sin(o);return t.defined(n)||(n=new i),n.x=c,n.y=d,n.z=f,i.normalize(n,n)},x.prototype.geodeticSurfaceNormal=function(e,r){return t.defined(r)||(r=new i),r=i.multiplyComponents(e,this._oneOverRadiiSquared,r),i.normalize(r,r)};var w=new i,S=new i;x.prototype.cartographicToCartesian=function(e,r){var n=w,a=S;this.geodeticSurfaceNormalCartographic(e,n),i.multiplyComponents(this._radiiSquared,n,a);var o=Math.sqrt(i.dot(n,a));return i.divideByScalar(a,o,a),i.multiplyByScalar(n,e.height,n),t.defined(r)||(r=new i),i.add(a,n,r)},x.prototype.cartographicArrayToCartesianArray=function(e,n){r.Check.defined("cartographics",e);var i=e.length;t.defined(n)?n.length=i:n=new Array(i);for(var a=0;a<i;a++)n[a]=this.cartographicToCartesian(e[a],n[a]);return n};var _=new i,q=new i,j=new i;x.prototype.cartesianToCartographic=function(e,r){var a=this.scaleToGeodeticSurface(e,q);if(t.defined(a)){var o=this.geodeticSurfaceNormal(a,_),u=i.subtract(e,a,j),c=Math.atan2(o.y,o.x),d=Math.asin(o.z),f=n.CesiumMath.sign(i.dot(u,e))*i.magnitude(u);return t.defined(r)?(r.longitude=c,r.latitude=d,r.height=f,r):new m(c,d,f)}},x.prototype.cartesianArrayToCartographicArray=function(e,n){r.Check.defined("cartesians",e);var i=e.length;t.defined(n)?n.length=i:n=new Array(i);for(var a=0;a<i;++a)n[a]=this.cartesianToCartographic(e[a],n[a]);return n},x.prototype.scaleToGeodeticSurface=function(e,t){return p(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},x.prototype.scaleToGeocentricSurface=function(e,n){r.Check.typeOf.object("cartesian",e),t.defined(n)||(n=new i);var a=e.x,o=e.y,u=e.z,c=this._oneOverRadiiSquared,d=1/Math.sqrt(a*a*c.x+o*o*c.y+u*u*c.z);return i.multiplyByScalar(e,d,n)},x.prototype.transformPositionToScaledSpace=function(e,r){return t.defined(r)||(r=new i),i.multiplyComponents(e,this._oneOverRadii,r)},x.prototype.transformPositionFromScaledSpace=function(e,r){return t.defined(r)||(r=new i),i.multiplyComponents(e,this._radii,r)},x.prototype.equals=function(e){return this===e||t.defined(e)&&i.equals(this._radii,e._radii)},x.prototype.toString=function(){return this._radii.toString()},x.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,a,o){if(r.Check.typeOf.object("position",e),!n.CesiumMath.equalsEpsilon(this._radii.x,this._radii.y,n.CesiumMath.EPSILON15))throw new r.DeveloperError("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");r.Check.typeOf.number.greaterThan("Ellipsoid.radii.z",this._radii.z,0),a=t.defaultValue(a,0);var u=this._squaredXOverSquaredZ;if(t.defined(o)||(o=new i),o.x=0,o.y=0,o.z=e.z*(1-u),!(Math.abs(o.z)>=this._radii.z-a))return o},e.Cartesian3=i,e.Cartographic=m,e.Ellipsoid=x}));
//# sourceMappingURL=Ellipsoid-1cbb4ac9.js.map

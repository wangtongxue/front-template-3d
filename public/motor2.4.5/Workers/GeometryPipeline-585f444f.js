define(["exports","./when-7ef6387a","./Check-ed6a1804","./Math-85667bf9","./Ellipsoid-1cbb4ac9","./Transforms-c20c38d0","./Cartesian2-73569d25","./ComponentDatatype-a863af81","./GeometryAttribute-6b3c7112","./AttributeCompression-5e3c38a2","./EncodedCartesian3-fbe51c6d","./IndexDatatype-f12d39b5","./IntersectionTests-faaebeeb","./Plane-6ff6c057"],(function(e,t,r,i,a,n,o,s,u,p,d,l,v,f){"use strict";var m=new a.Cartesian3,y=new a.Cartesian3,c=new a.Cartesian3;var h={calculateACMR:function(e){var i=(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT)).indices,a=e.maximumIndex,n=t.defaultValue(e.cacheSize,24);if(!t.defined(i))throw new r.DeveloperError("indices is required.");var o=i.length;if(o<3||o%3!=0)throw new r.DeveloperError("indices length must be a multiple of three.");if(a<=0)throw new r.DeveloperError("maximumIndex must be greater than zero.");if(n<3)throw new r.DeveloperError("cacheSize must be greater than two.");if(!t.defined(a)){a=0;for(var s=0,u=i[s];s<o;)u>a&&(a=u),u=i[++s]}for(var p=[],d=0;d<a+1;d++)p[d]=0;for(var l=n+1,v=0;v<o;++v)l-p[i[v]]>n&&(p[i[v]]=l,++l);return(l-n+1)/(o/3)}};h.tipsify=function(e){var i,a=(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT)).indices,n=e.maximumIndex,o=t.defaultValue(e.cacheSize,24);function s(e,t,r,a,n,o,s){for(var u,p=-1,d=-1,l=0;l<r.length;){var v=r[l];a[v].numLiveTriangles&&(u=0,n-a[v].timeStamp+2*a[v].numLiveTriangles<=t&&(u=n-a[v].timeStamp),(u>d||-1===d)&&(d=u,p=v)),++l}return-1===p?function(e,t,r,a){for(;t.length>=1;){var n=t[t.length-1];if(t.splice(t.length-1,1),e[n].numLiveTriangles>0)return n}for(;i<a;){if(e[i].numLiveTriangles>0)return++i-1;++i}return-1}(a,o,0,s):p}if(!t.defined(a))throw new r.DeveloperError("indices is required.");var u=a.length;if(u<3||u%3!=0)throw new r.DeveloperError("indices length must be a multiple of three.");if(n<=0)throw new r.DeveloperError("maximumIndex must be greater than zero.");if(o<3)throw new r.DeveloperError("cacheSize must be greater than two.");var p=0,d=0,l=a[d],v=u;if(t.defined(n))p=n+1;else{for(;d<v;)l>p&&(p=l),l=a[++d];if(-1===p)return 0;++p}var f,m=[];for(f=0;f<p;f++)m[f]={numLiveTriangles:0,timeStamp:0,vertexTriangles:[]};d=0;for(var y=0;d<v;)m[a[d]].vertexTriangles.push(y),++m[a[d]].numLiveTriangles,m[a[d+1]].vertexTriangles.push(y),++m[a[d+1]].numLiveTriangles,m[a[d+2]].vertexTriangles.push(y),++m[a[d+2]].numLiveTriangles,++y,d+=3;var c=0,h=o+1;i=1;var C,b,w,g,T=[],A=[],E=0,D=[],x=u/3,P=[];for(f=0;f<x;f++)P[f]=!1;for(;-1!==c;){T=[],g=(b=m[c]).vertexTriangles.length;for(var I=0;I<g;++I)if(!P[y=b.vertexTriangles[I]]){P[y]=!0,d=y+y+y;for(var S=0;S<3;++S)w=a[d],T.push(w),A.push(w),D[E]=w,++E,--(C=m[w]).numLiveTriangles,h-C.timeStamp>o&&(C.timeStamp=h,++h),++d}c=s(0,o,T,m,h,A,p)}return D};var C={};function b(e,t,r,i,a){e[t++]=r,e[t++]=i,e[t++]=i,e[t++]=a,e[t++]=a,e[t]=r}function w(e){var r={};for(var i in e)if(e.hasOwnProperty(i)&&t.defined(e[i])&&t.defined(e[i].values)){var a=e[i];r[i]=new u.GeometryAttribute({componentDatatype:a.componentDatatype,componentsPerAttribute:a.componentsPerAttribute,normalize:a.normalize,values:[]})}return r}function g(e,r,i){for(var a in r)if(r.hasOwnProperty(a)&&t.defined(r[a])&&t.defined(r[a].values))for(var n=r[a],o=0;o<n.componentsPerAttribute;++o)e[a].values.push(n.values[i*n.componentsPerAttribute+o])}C.toWireframe=function(e){if(!t.defined(e))throw new r.DeveloperError("geometry is required.");var i=e.indices;if(t.defined(i)){switch(e.primitiveType){case u.PrimitiveType.TRIANGLES:e.indices=function(e){for(var t=e.length,r=t/3*6,i=l.IndexDatatype.createTypedArray(t,r),a=0,n=0;n<t;n+=3,a+=6)b(i,a,e[n],e[n+1],e[n+2]);return i}(i);break;case u.PrimitiveType.TRIANGLE_STRIP:e.indices=function(e){var t=e.length;if(t>=3){var r=6*(t-2),i=l.IndexDatatype.createTypedArray(t,r);b(i,0,e[0],e[1],e[2]);for(var a=6,n=3;n<t;++n,a+=6)b(i,a,e[n-1],e[n],e[n-2]);return i}return new Uint16Array}(i);break;case u.PrimitiveType.TRIANGLE_FAN:e.indices=function(e){if(e.length>0){for(var t=e.length-1,r=6*(t-1),i=l.IndexDatatype.createTypedArray(t,r),a=e[0],n=0,o=1;o<t;++o,n+=6)b(i,n,a,e[o],e[o+1]);return i}return new Uint16Array}(i);break;default:throw new r.DeveloperError("geometry.primitiveType must be TRIANGLES, TRIANGLE_STRIP, or TRIANGLE_FAN.")}e.primitiveType=u.PrimitiveType.LINES}return e},C.createLineSegmentsForVectors=function(e,i,a){if(i=t.defaultValue(i,"normal"),!t.defined(e))throw new r.DeveloperError("geometry is required.");if(!t.defined(e.attributes.position))throw new r.DeveloperError("geometry.attributes.position is required.");if(!t.defined(e.attributes[i]))throw new r.DeveloperError("geometry.attributes must have an attribute with the same name as the attributeName parameter, "+i+".");a=t.defaultValue(a,1e4);for(var o,p=e.attributes.position.values,d=e.attributes[i].values,l=p.length,v=new Float64Array(2*l),f=0,m=0;m<l;m+=3)v[f++]=p[m],v[f++]=p[m+1],v[f++]=p[m+2],v[f++]=p[m]+d[m]*a,v[f++]=p[m+1]+d[m+1]*a,v[f++]=p[m+2]+d[m+2]*a;var y=e.boundingSphere;return t.defined(y)&&(o=new n.BoundingSphere(y.center,y.radius+a)),new u.Geometry({attributes:{position:new u.GeometryAttribute({componentDatatype:s.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:v})},primitiveType:u.PrimitiveType.LINES,boundingSphere:o})},C.createAttributeLocations=function(e){if(!t.defined(e))throw new r.DeveloperError("geometry is required.");var i,a=["position","positionHigh","positionLow","position3DHigh","position3DLow","position2DHigh","position2DLow","pickColor","normal","st","tangent","bitangent","extrudeDirection","compressedAttributes"],n=e.attributes,o={},s=0,u=a.length;for(i=0;i<u;++i){var p=a[i];t.defined(n[p])&&(o[p]=s++)}for(var d in n)n.hasOwnProperty(d)&&!t.defined(o[d])&&(o[d]=s++);return o},C.reorderForPreVertexCache=function(e){if(!t.defined(e))throw new r.DeveloperError("geometry is required.");var i=u.Geometry.computeNumberOfVertices(e),a=e.indices;if(t.defined(a)){for(var n=new Int32Array(i),o=0;o<i;o++)n[o]=-1;for(var p,d=a,v=d.length,f=l.IndexDatatype.createTypedArray(i,v),m=0,y=0,c=0;m<v;)-1!==(p=n[d[m]])?f[y]=p:(n[p=d[m]]=c,f[y]=c,++c),++m,++y;e.indices=f;var h=e.attributes;for(var C in h)if(h.hasOwnProperty(C)&&t.defined(h[C])&&t.defined(h[C].values)){for(var b=h[C],w=b.values,g=0,T=b.componentsPerAttribute,A=s.ComponentDatatype.createTypedArray(b.componentDatatype,c*T);g<i;){var E=n[g];if(-1!==E)for(var D=0;D<T;D++)A[T*E+D]=w[T*g+D];++g}b.values=A}}return e},C.reorderForPostVertexCache=function(e,i){if(!t.defined(e))throw new r.DeveloperError("geometry is required.");var a=e.indices;if(e.primitiveType===u.PrimitiveType.TRIANGLES&&t.defined(a)){for(var n=a.length,o=0,s=0;s<n;s++)a[s]>o&&(o=a[s]);e.indices=h.tipsify({indices:a,maximumIndex:o,cacheSize:i})}return e},C.fitToUnsignedShortIndices=function(e){if(!t.defined(e))throw new r.DeveloperError("geometry is required.");if(t.defined(e.indices)&&e.primitiveType!==u.PrimitiveType.TRIANGLES&&e.primitiveType!==u.PrimitiveType.LINES&&e.primitiveType!==u.PrimitiveType.POINTS)throw new r.DeveloperError("geometry.primitiveType must equal to PrimitiveType.TRIANGLES, PrimitiveType.LINES, or PrimitiveType.POINTS.");var a=[],n=u.Geometry.computeNumberOfVertices(e);if(t.defined(e.indices)&&n>=i.CesiumMath.SIXTY_FOUR_KILOBYTES){var o,s=[],p=[],d=0,l=w(e.attributes),v=e.indices,f=v.length;e.primitiveType===u.PrimitiveType.TRIANGLES?o=3:e.primitiveType===u.PrimitiveType.LINES?o=2:e.primitiveType===u.PrimitiveType.POINTS&&(o=1);for(var m=0;m<f;m+=o){for(var y=0;y<o;++y){var c=v[m+y],h=s[c];t.defined(h)||(h=d++,s[c]=h,g(l,e.attributes,c)),p.push(h)}d+o>=i.CesiumMath.SIXTY_FOUR_KILOBYTES&&(a.push(new u.Geometry({attributes:l,indices:p,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV})),s=[],p=[],d=0,l=w(e.attributes))}0!==p.length&&a.push(new u.Geometry({attributes:l,indices:p,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV}))}else a.push(e);return a};var T=new a.Cartesian3,A=new a.Cartographic;C.projectTo2D=function(e,i,o,p,d){if(!t.defined(e))throw new r.DeveloperError("geometry is required.");if(!t.defined(i))throw new r.DeveloperError("attributeName is required.");if(!t.defined(o))throw new r.DeveloperError("attributeName3D is required.");if(!t.defined(p))throw new r.DeveloperError("attributeName2D is required.");if(!t.defined(e.attributes[i]))throw new r.DeveloperError("geometry must have attribute matching the attributeName argument: "+i+".");if(e.attributes[i].componentDatatype!==s.ComponentDatatype.DOUBLE)throw new r.DeveloperError("The attribute componentDatatype must be ComponentDatatype.DOUBLE.");for(var l=e.attributes[i],v=(d=t.defined(d)?d:new n.GeographicProjection).ellipsoid,f=l.values,m=new Float64Array(f.length),y=0,c=0;c<f.length;c+=3){var h=a.Cartesian3.fromArray(f,c,T),C=v.cartesianToCartographic(h,A);if(!t.defined(C))throw new r.DeveloperError("Could not project point ("+h.x+", "+h.y+", "+h.z+") to 2D.");var b=d.project(C,T);m[y++]=b.x,m[y++]=b.y,m[y++]=b.z}return e.attributes[o]=l,e.attributes[p]=new u.GeometryAttribute({componentDatatype:s.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:m}),delete e.attributes[i],e};var E={high:0,low:0};C.encodeAttribute=function(e,i,a,n){if(!t.defined(e))throw new r.DeveloperError("geometry is required.");if(!t.defined(i))throw new r.DeveloperError("attributeName is required.");if(!t.defined(a))throw new r.DeveloperError("attributeHighName is required.");if(!t.defined(n))throw new r.DeveloperError("attributeLowName is required.");if(!t.defined(e.attributes[i]))throw new r.DeveloperError("geometry must have attribute matching the attributeName argument: "+i+".");if(e.attributes[i].componentDatatype!==s.ComponentDatatype.DOUBLE)throw new r.DeveloperError("The attribute componentDatatype must be ComponentDatatype.DOUBLE.");for(var o=e.attributes[i],p=o.values,l=p.length,v=new Float32Array(l),f=new Float32Array(l),m=0;m<l;++m)d.EncodedCartesian3.encode(p[m],E),v[m]=E.high,f[m]=E.low;var y=o.componentsPerAttribute;return e.attributes[a]=new u.GeometryAttribute({componentDatatype:s.ComponentDatatype.FLOAT,componentsPerAttribute:y,values:v}),e.attributes[n]=new u.GeometryAttribute({componentDatatype:s.ComponentDatatype.FLOAT,componentsPerAttribute:y,values:f}),delete e.attributes[i],e};var D=new a.Cartesian3;function x(e,r){if(t.defined(r))for(var i=r.values,o=i.length,s=0;s<o;s+=3)a.Cartesian3.unpack(i,s,D),n.Matrix4.multiplyByPoint(e,D,D),a.Cartesian3.pack(D,i,s)}function P(e,r){if(t.defined(r))for(var i=r.values,o=i.length,s=0;s<o;s+=3)a.Cartesian3.unpack(i,s,D),n.Matrix3.multiplyByVector(e,D,D),D=a.Cartesian3.normalize(D,D),a.Cartesian3.pack(D,i,s)}var I=new n.Matrix4,S=new n.Matrix3;C.transformToWorldCoordinates=function(e){if(!t.defined(e))throw new r.DeveloperError("instance is required.");var i=e.modelMatrix;if(n.Matrix4.equals(i,n.Matrix4.IDENTITY))return e;var a=e.geometry.attributes;x(i,a.position),x(i,a.prevPosition),x(i,a.nextPosition),(t.defined(a.normal)||t.defined(a.tangent)||t.defined(a.bitangent))&&(n.Matrix4.inverse(i,I),n.Matrix4.transpose(I,I),n.Matrix4.getMatrix3(I,S),P(S,a.normal),P(S,a.tangent),P(S,a.bitangent));var o=e.geometry.boundingSphere;return t.defined(o)&&(e.geometry.boundingSphere=n.BoundingSphere.transform(o,i,o)),e.modelMatrix=n.Matrix4.clone(n.Matrix4.IDENTITY),e};var N=new a.Cartesian3;function O(e,i){var o,p,d,v,f=e.length,m=e[0].modelMatrix,y=t.defined(e[0][i].indices),c=e[0][i].primitiveType;for(p=1;p<f;++p){if(!n.Matrix4.equals(e[p].modelMatrix,m))throw new r.DeveloperError("All instances must have the same modelMatrix.");if(t.defined(e[p][i].indices)!==y)throw new r.DeveloperError("All instance geometries must have an indices or not have one.");if(e[p][i].primitiveType!==c)throw new r.DeveloperError("All instance geometries must have the same primitiveType.")}var h,C,b,w,g=function(e,r){var i,a=e.length,n={},o=e[0][r].attributes;for(i in o)if(o.hasOwnProperty(i)&&t.defined(o[i])&&t.defined(o[i].values)){for(var p=o[i],d=p.values.length,l=!0,v=1;v<a;++v){var f=e[v][r].attributes[i];if(!t.defined(f)||p.componentDatatype!==f.componentDatatype||p.componentsPerAttribute!==f.componentsPerAttribute||p.normalize!==f.normalize){l=!1;break}d+=f.values.length}l&&(n[i]=new u.GeometryAttribute({componentDatatype:p.componentDatatype,componentsPerAttribute:p.componentsPerAttribute,normalize:p.normalize,values:s.ComponentDatatype.createTypedArray(p.componentDatatype,d)}))}return n}(e,i);for(o in g)if(g.hasOwnProperty(o))for(h=g[o].values,v=0,p=0;p<f;++p)for(b=(C=e[p][i].attributes[o].values).length,d=0;d<b;++d)h[v++]=C[d];if(y){var T=0;for(p=0;p<f;++p)T+=e[p][i].indices.length;var A=u.Geometry.computeNumberOfVertices(new u.Geometry({attributes:g,primitiveType:u.PrimitiveType.POINTS})),E=l.IndexDatatype.createTypedArray(A,T),D=0,x=0;for(p=0;p<f;++p){var P=e[p][i].indices,I=P.length;for(v=0;v<I;++v)E[D++]=x+P[v];x+=u.Geometry.computeNumberOfVertices(e[p][i])}w=E}var S,O=new a.Cartesian3,L=0;for(p=0;p<f;++p){if(S=e[p][i].boundingSphere,!t.defined(S)){O=void 0;break}a.Cartesian3.add(S.center,O,O)}if(t.defined(O))for(a.Cartesian3.divideByScalar(O,f,O),p=0;p<f;++p){S=e[p][i].boundingSphere;var z=a.Cartesian3.magnitude(a.Cartesian3.subtract(S.center,O,N))+S.radius;z>L&&(L=z)}return new u.Geometry({attributes:g,indices:w,primitiveType:c,boundingSphere:t.defined(O)?new n.BoundingSphere(O,L):void 0})}C.combineInstances=function(e){if(!t.defined(e)||e.length<1)throw new r.DeveloperError("instances is required and must have length greater than zero.");for(var i=[],a=[],n=e.length,o=0;o<n;++o){var s=e[o];t.defined(s.geometry)?i.push(s):t.defined(s.westHemisphereGeometry)&&t.defined(s.eastHemisphereGeometry)&&a.push(s)}var u=[];return i.length>0&&u.push(O(i,"geometry")),a.length>0&&(u.push(O(a,"westHemisphereGeometry")),u.push(O(a,"eastHemisphereGeometry"))),u};var L=new a.Cartesian3,z=new a.Cartesian3,G=new a.Cartesian3,M=new a.Cartesian3;C.computeNormal=function(e){if(!t.defined(e))throw new r.DeveloperError("geometry is required.");if(!t.defined(e.attributes.position)||!t.defined(e.attributes.position.values))throw new r.DeveloperError("geometry.attributes.position.values is required.");if(!t.defined(e.indices))throw new r.DeveloperError("geometry.indices is required.");if(e.indices.length<2||e.indices.length%3!=0)throw new r.DeveloperError("geometry.indices length must be greater than 0 and be a multiple of 3.");if(e.primitiveType!==u.PrimitiveType.TRIANGLES)throw new r.DeveloperError("geometry.primitiveType must be PrimitiveType.TRIANGLES.");var n,o=e.indices,p=e.attributes,d=p.position.values,l=p.position.values.length/3,v=o.length,f=new Array(l),m=new Array(v/3),y=new Array(v);for(n=0;n<l;n++)f[n]={indexOffset:0,count:0,currentCount:0};var c=0;for(n=0;n<v;n+=3){var h=o[n],C=o[n+1],b=o[n+2],w=3*h,g=3*C,T=3*b;z.x=d[w],z.y=d[w+1],z.z=d[w+2],G.x=d[g],G.y=d[g+1],G.z=d[g+2],M.x=d[T],M.y=d[T+1],M.z=d[T+2],f[h].count++,f[C].count++,f[b].count++,a.Cartesian3.subtract(G,z,G),a.Cartesian3.subtract(M,z,M),m[c]=a.Cartesian3.cross(G,M,new a.Cartesian3),c++}var A,E=0;for(n=0;n<l;n++)f[n].indexOffset+=E,E+=f[n].count;for(c=0,n=0;n<v;n+=3){var D=(A=f[o[n]]).indexOffset+A.currentCount;y[D]=c,A.currentCount++,y[D=(A=f[o[n+1]]).indexOffset+A.currentCount]=c,A.currentCount++,y[D=(A=f[o[n+2]]).indexOffset+A.currentCount]=c,A.currentCount++,c++}var x=new Float32Array(3*l);for(n=0;n<l;n++){var P=3*n;if(A=f[n],a.Cartesian3.clone(a.Cartesian3.ZERO,L),A.count>0){for(c=0;c<A.count;c++)a.Cartesian3.add(L,m[y[A.indexOffset+c]],L);a.Cartesian3.equalsEpsilon(a.Cartesian3.ZERO,L,i.CesiumMath.EPSILON10)&&a.Cartesian3.clone(m[y[A.indexOffset]],L)}a.Cartesian3.equalsEpsilon(a.Cartesian3.ZERO,L,i.CesiumMath.EPSILON10)&&(L.z=1),a.Cartesian3.normalize(L,L),x[P]=L.x,x[P+1]=L.y,x[P+2]=L.z}return e.attributes.normal=new u.GeometryAttribute({componentDatatype:s.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:x}),e};var q=new a.Cartesian3,R=new a.Cartesian3,B=new a.Cartesian3;C.computeTangentAndBitangent=function(e){if(!t.defined(e))throw new r.DeveloperError("geometry is required.");var i=e.attributes,n=e.indices;if(!t.defined(i.position)||!t.defined(i.position.values))throw new r.DeveloperError("geometry.attributes.position.values is required.");if(!t.defined(i.normal)||!t.defined(i.normal.values))throw new r.DeveloperError("geometry.attributes.normal.values is required.");if(!t.defined(i.st)||!t.defined(i.st.values))throw new r.DeveloperError("geometry.attributes.st.values is required.");if(!t.defined(n))throw new r.DeveloperError("geometry.indices is required.");if(n.length<2||n.length%3!=0)throw new r.DeveloperError("geometry.indices length must be greater than 0 and be a multiple of 3.");if(e.primitiveType!==u.PrimitiveType.TRIANGLES)throw new r.DeveloperError("geometry.primitiveType must be PrimitiveType.TRIANGLES.");var o,p,d,l,v=e.attributes.position.values,f=e.attributes.normal.values,m=e.attributes.st.values,y=e.attributes.position.values.length/3,c=n.length,h=new Array(3*y);for(o=0;o<h.length;o++)h[o]=0;for(o=0;o<c;o+=3){var C=n[o],b=n[o+1],w=n[o+2];d=3*b,l=3*w;var g=2*C,T=2*b,A=2*w,E=v[p=3*C],D=v[p+1],x=v[p+2],P=m[g],I=m[g+1],S=m[T+1]-I,N=m[A+1]-I,O=1/((m[T]-P)*N-(m[A]-P)*S),L=(N*(v[d]-E)-S*(v[l]-E))*O,z=(N*(v[d+1]-D)-S*(v[l+1]-D))*O,G=(N*(v[d+2]-x)-S*(v[l+2]-x))*O;h[p]+=L,h[p+1]+=z,h[p+2]+=G,h[d]+=L,h[d+1]+=z,h[d+2]+=G,h[l]+=L,h[l+1]+=z,h[l+2]+=G}var M=new Float32Array(3*y),V=new Float32Array(3*y);for(o=0;o<y;o++){d=(p=3*o)+1,l=p+2;var k=a.Cartesian3.fromArray(f,p,q),F=a.Cartesian3.fromArray(h,p,B),_=a.Cartesian3.dot(k,F);a.Cartesian3.multiplyByScalar(k,_,R),a.Cartesian3.normalize(a.Cartesian3.subtract(F,R,F),F),M[p]=F.x,M[d]=F.y,M[l]=F.z,a.Cartesian3.normalize(a.Cartesian3.cross(k,F,F),F),V[p]=F.x,V[d]=F.y,V[l]=F.z}return e.attributes.tangent=new u.GeometryAttribute({componentDatatype:s.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:M}),e.attributes.bitangent=new u.GeometryAttribute({componentDatatype:s.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:V}),e};var V=new o.Cartesian2,k=new a.Cartesian3,F=new a.Cartesian3,_=new a.Cartesian3,U=new o.Cartesian2;function Y(e){switch(e.primitiveType){case u.PrimitiveType.TRIANGLE_FAN:return function(e){var t=u.Geometry.computeNumberOfVertices(e);if(t<3)throw new r.DeveloperError("The number of vertices must be at least three.");var i=l.IndexDatatype.createTypedArray(t,3*(t-2));i[0]=1,i[1]=0,i[2]=2;for(var a=3,n=3;n<t;++n)i[a++]=n-1,i[a++]=0,i[a++]=n;return e.indices=i,e.primitiveType=u.PrimitiveType.TRIANGLES,e}(e);case u.PrimitiveType.TRIANGLE_STRIP:return function(e){var t=u.Geometry.computeNumberOfVertices(e);if(t<3)throw new r.DeveloperError("The number of vertices must be at least 3.");var i=l.IndexDatatype.createTypedArray(t,3*(t-2));i[0]=0,i[1]=1,i[2]=2,t>3&&(i[3]=0,i[4]=2,i[5]=3);for(var a=6,n=3;n<t-1;n+=2)i[a++]=n,i[a++]=n-1,i[a++]=n+1,n+2<t&&(i[a++]=n,i[a++]=n+1,i[a++]=n+2);return e.indices=i,e.primitiveType=u.PrimitiveType.TRIANGLES,e}(e);case u.PrimitiveType.TRIANGLES:return function(e){if(t.defined(e.indices))return e;var i=u.Geometry.computeNumberOfVertices(e);if(i<3)throw new r.DeveloperError("The number of vertices must be at least three.");if(i%3!=0)throw new r.DeveloperError("The number of vertices must be a multiple of three.");for(var a=l.IndexDatatype.createTypedArray(i,i),n=0;n<i;++n)a[n]=n;return e.indices=a,e}(e);case u.PrimitiveType.LINE_STRIP:return function(e){var t=u.Geometry.computeNumberOfVertices(e);if(t<2)throw new r.DeveloperError("The number of vertices must be at least two.");var i=l.IndexDatatype.createTypedArray(t,2*(t-1));i[0]=0,i[1]=1;for(var a=2,n=2;n<t;++n)i[a++]=n-1,i[a++]=n;return e.indices=i,e.primitiveType=u.PrimitiveType.LINES,e}(e);case u.PrimitiveType.LINE_LOOP:return function(e){var t=u.Geometry.computeNumberOfVertices(e);if(t<2)throw new r.DeveloperError("The number of vertices must be at least two.");var i=l.IndexDatatype.createTypedArray(t,2*t);i[0]=0,i[1]=1;for(var a=2,n=2;n<t;++n)i[a++]=n-1,i[a++]=n;return i[a++]=t-1,i[a]=0,e.indices=i,e.primitiveType=u.PrimitiveType.LINES,e}(e);case u.PrimitiveType.LINES:return function(e){if(t.defined(e.indices))return e;var i=u.Geometry.computeNumberOfVertices(e);if(i<2)throw new r.DeveloperError("The number of vertices must be at least two.");if(i%2!=0)throw new r.DeveloperError("The number of vertices must be a multiple of 2.");for(var a=l.IndexDatatype.createTypedArray(i,i),n=0;n<i;++n)a[n]=n;return e.indices=a,e}(e)}return e}function Z(e,t){Math.abs(e.y)<i.CesiumMath.EPSILON6&&(e.y=t?-i.CesiumMath.EPSILON6:i.CesiumMath.EPSILON6)}C.compressVertices=function(e){if(!t.defined(e))throw new r.DeveloperError("geometry is required.");var i,n,d=e.attributes.extrudeDirection;if(t.defined(d)){var l=d.values;n=l.length/3;var v=new Float32Array(2*n),f=0;for(i=0;i<n;++i)a.Cartesian3.fromArray(l,3*i,k),a.Cartesian3.equals(k,a.Cartesian3.ZERO)?f+=2:(U=p.AttributeCompression.octEncodeInRange(k,65535,U),v[f++]=U.x,v[f++]=U.y);return e.attributes.compressedAttributes=new u.GeometryAttribute({componentDatatype:s.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:v}),delete e.attributes.extrudeDirection,e}var m=e.attributes.normal,y=e.attributes.st,c=t.defined(m),h=t.defined(y);if(!c&&!h)return e;var C,b,w,g,T=e.attributes.tangent,A=e.attributes.bitangent,E=t.defined(T),D=t.defined(A);c&&(C=m.values),h&&(b=y.values),E&&(w=T.values),D&&(g=A.values);var x=n=(c?C.length:b.length)/(c?3:2),P=h&&c?2:1;P+=E||D?1:0;var I=new Float32Array(x*=P),S=0;for(i=0;i<n;++i){h&&(o.Cartesian2.fromArray(b,2*i,V),I[S++]=p.AttributeCompression.compressTextureCoordinates(V));var N=3*i;c&&t.defined(w)&&t.defined(g)?(a.Cartesian3.fromArray(C,N,k),a.Cartesian3.fromArray(w,N,F),a.Cartesian3.fromArray(g,N,_),p.AttributeCompression.octPack(k,F,_,V),I[S++]=V.x,I[S++]=V.y):(c&&(a.Cartesian3.fromArray(C,N,k),I[S++]=p.AttributeCompression.octEncodeFloat(k)),E&&(a.Cartesian3.fromArray(w,N,k),I[S++]=p.AttributeCompression.octEncodeFloat(k)),D&&(a.Cartesian3.fromArray(g,N,k),I[S++]=p.AttributeCompression.octEncodeFloat(k)))}return e.attributes.compressedAttributes=new u.GeometryAttribute({componentDatatype:s.ComponentDatatype.FLOAT,componentsPerAttribute:P,values:I}),c&&delete e.attributes.normal,h&&delete e.attributes.st,D&&delete e.attributes.bitangent,E&&delete e.attributes.tangent,e};var H=new a.Cartesian3;function W(e,t,r,i){a.Cartesian3.add(e,a.Cartesian3.multiplyByScalar(a.Cartesian3.subtract(t,e,H),e.y/(e.y-t.y),H),r),a.Cartesian3.clone(r,i),Z(r,!0),Z(i,!1)}var X=new a.Cartesian3,j=new a.Cartesian3,J=new a.Cartesian3,K=new a.Cartesian3,Q={positions:new Array(7),indices:new Array(9)};function $(e,t,r){if(!(e.x>=0||t.x>=0||r.x>=0)){!function(e,t,r){if(0!==e.y&&0!==t.y&&0!==r.y)return Z(e,e.y<0),Z(t,t.y<0),void Z(r,r.y<0);var a=Math.abs(e.y),n=Math.abs(t.y),o=Math.abs(r.y),s=(a>n?a>o?i.CesiumMath.sign(e.y):i.CesiumMath.sign(r.y):n>o?i.CesiumMath.sign(t.y):i.CesiumMath.sign(r.y))<0;Z(e,s),Z(t,s),Z(r,s)}(e,t,r);var a=e.y<0,n=t.y<0,o=r.y<0,s=0;s+=a?1:0,s+=n?1:0;var u=Q.indices;1===(s+=o?1:0)?(u[1]=3,u[2]=4,u[5]=6,u[7]=6,u[8]=5,a?(W(e,t,X,J),W(e,r,j,K),u[0]=0,u[3]=1,u[4]=2,u[6]=1):n?(W(t,r,X,J),W(t,e,j,K),u[0]=1,u[3]=2,u[4]=0,u[6]=2):o&&(W(r,e,X,J),W(r,t,j,K),u[0]=2,u[3]=0,u[4]=1,u[6]=0)):2===s&&(u[2]=4,u[4]=4,u[5]=3,u[7]=5,u[8]=6,a?n?o||(W(r,e,X,J),W(r,t,j,K),u[0]=0,u[1]=1,u[3]=0,u[6]=2):(W(t,r,X,J),W(t,e,j,K),u[0]=2,u[1]=0,u[3]=2,u[6]=1):(W(e,t,X,J),W(e,r,j,K),u[0]=1,u[1]=2,u[3]=1,u[6]=0));var p=Q.positions;return p[0]=e,p[1]=t,p[2]=r,p.length=3,1!==s&&2!==s||(p[3]=X,p[4]=j,p[5]=J,p[6]=K,p.length=7),Q}}function ee(e,r){var i=e.attributes;if(0!==i.position.values.length){for(var a in i)if(i.hasOwnProperty(a)&&t.defined(i[a])&&t.defined(i[a].values)){var o=i[a];o.values=s.ComponentDatatype.createTypedArray(o.componentDatatype,o.values)}var p=u.Geometry.computeNumberOfVertices(e);return e.indices=l.IndexDatatype.createTypedArray(p,e.indices),r&&(e.boundingSphere=n.BoundingSphere.fromVertices(i.position.values)),e}}function te(e){var r=e.attributes,i={};for(var a in r)if(r.hasOwnProperty(a)&&t.defined(r[a])&&t.defined(r[a].values)){var n=r[a];i[a]=new u.GeometryAttribute({componentDatatype:n.componentDatatype,componentsPerAttribute:n.componentsPerAttribute,normalize:n.normalize,values:[]})}return new u.Geometry({attributes:i,indices:[],primitiveType:e.primitiveType})}function re(e,r,i){var a=t.defined(e.geometry.boundingSphere);r=ee(r,a),i=ee(i,a),t.defined(i)&&!t.defined(r)?e.geometry=i:!t.defined(i)&&t.defined(r)?e.geometry=r:(e.westHemisphereGeometry=r,e.eastHemisphereGeometry=i,e.geometry=void 0)}function ie(e,t){var r=new e,i=new e,a=new e;return function(n,o,s,u,p,d,l,v){var f=e.fromArray(p,n*t,r),m=e.fromArray(p,o*t,i),y=e.fromArray(p,s*t,a);e.multiplyByScalar(f,u.x,f),e.multiplyByScalar(m,u.y,m),e.multiplyByScalar(y,u.z,y);var c=e.add(f,m,f);e.add(c,y,c),v&&e.normalize(c,c),e.pack(c,d,l*t)}}var ae=ie(n.Cartesian4,4),ne=ie(a.Cartesian3,3),oe=ie(o.Cartesian2,2),se=new a.Cartesian3,ue=new a.Cartesian3,pe=new a.Cartesian3,de=new a.Cartesian3;function le(e,n,s,u,p,d,l,v,f,h,C,b,w,g,T,A){if(t.defined(d)||t.defined(l)||t.defined(v)||t.defined(f)||t.defined(h)||0!==g){var E=function(e,n,s,u,p){var d,l,v,f,h,C,b,w;if(r.Check.defined("point",e),r.Check.defined("p0",n),r.Check.defined("p1",s),r.Check.defined("p2",u),t.defined(p)||(p=new a.Cartesian3),t.defined(n.z)){if(a.Cartesian3.equalsEpsilon(e,n,i.CesiumMath.EPSILON14))return a.Cartesian3.clone(a.Cartesian3.UNIT_X,p);if(a.Cartesian3.equalsEpsilon(e,s,i.CesiumMath.EPSILON14))return a.Cartesian3.clone(a.Cartesian3.UNIT_Y,p);if(a.Cartesian3.equalsEpsilon(e,u,i.CesiumMath.EPSILON14))return a.Cartesian3.clone(a.Cartesian3.UNIT_Z,p);d=a.Cartesian3.subtract(s,n,m),l=a.Cartesian3.subtract(u,n,y),v=a.Cartesian3.subtract(e,n,c),f=a.Cartesian3.dot(d,d),h=a.Cartesian3.dot(d,l),C=a.Cartesian3.dot(d,v),b=a.Cartesian3.dot(l,l),w=a.Cartesian3.dot(l,v)}else{if(o.Cartesian2.equalsEpsilon(e,n,i.CesiumMath.EPSILON14))return a.Cartesian3.clone(a.Cartesian3.UNIT_X,p);if(o.Cartesian2.equalsEpsilon(e,s,i.CesiumMath.EPSILON14))return a.Cartesian3.clone(a.Cartesian3.UNIT_Y,p);if(o.Cartesian2.equalsEpsilon(e,u,i.CesiumMath.EPSILON14))return a.Cartesian3.clone(a.Cartesian3.UNIT_Z,p);d=o.Cartesian2.subtract(s,n,m),l=o.Cartesian2.subtract(u,n,y),v=o.Cartesian2.subtract(e,n,c),f=o.Cartesian2.dot(d,d),h=o.Cartesian2.dot(d,l),C=o.Cartesian2.dot(d,v),b=o.Cartesian2.dot(l,l),w=o.Cartesian2.dot(l,v)}p.y=b*C-h*w,p.z=f*w-h*C;var g=f*b-h*h;return 0!==p.y&&(p.y/=g),0!==p.z&&(p.z/=g),p.x=1-p.y-p.z,p}(u,a.Cartesian3.fromArray(p,3*e,se),a.Cartesian3.fromArray(p,3*n,ue),a.Cartesian3.fromArray(p,3*s,pe),de);if(t.defined(d)&&ne(e,n,s,E,d,b.normal.values,A,!0),t.defined(h)){var D,x=a.Cartesian3.fromArray(h,3*e,se),P=a.Cartesian3.fromArray(h,3*n,ue),I=a.Cartesian3.fromArray(h,3*s,pe);a.Cartesian3.multiplyByScalar(x,E.x,x),a.Cartesian3.multiplyByScalar(P,E.y,P),a.Cartesian3.multiplyByScalar(I,E.z,I),a.Cartesian3.equals(x,a.Cartesian3.ZERO)&&a.Cartesian3.equals(P,a.Cartesian3.ZERO)&&a.Cartesian3.equals(I,a.Cartesian3.ZERO)?((D=se).x=0,D.y=0,D.z=0):(D=a.Cartesian3.add(x,P,x),a.Cartesian3.add(D,I,D),a.Cartesian3.normalize(D,D)),a.Cartesian3.pack(D,b.extrudeDirection.values,3*A)}if(t.defined(C)&&function(e,t,r,a,n,o,s){var u=n[e]*a.x,p=n[t]*a.y,d=n[r]*a.z;o[s]=u+p+d>i.CesiumMath.EPSILON6?1:0}(e,n,s,E,C,b.applyOffset.values,A),t.defined(l)&&ne(e,n,s,E,l,b.tangent.values,A,!0),t.defined(v)&&ne(e,n,s,E,v,b.bitangent.values,A,!0),t.defined(f)&&oe(e,n,s,E,f,b.st.values,A),g>0)for(var S=0;S<g;S++){var N=w[S];ve(e,n,s,E,A,T[N],b[N])}}}function ve(e,t,r,i,a,n,o){var s=n.componentsPerAttribute,u=n.values,p=o.values;switch(s){case 4:ae(e,t,r,i,u,p,a,!1);break;case 3:ne(e,t,r,i,u,p,a,!1);break;case 2:oe(e,t,r,i,u,p,a,!1);break;default:p[a]=u[e]*i.x+u[t]*i.y+u[r]*i.z}}function fe(e,t,r,i,a,n){var o=e.position.values.length/3;if(-1!==a){var s=i[a],u=r[s];return-1===u?(r[s]=o,e.position.values.push(n.x,n.y,n.z),t.push(o),o):(t.push(u),u)}return e.position.values.push(n.x,n.y,n.z),t.push(o),o}var me={position:!0,normal:!0,bitangent:!0,tangent:!0,st:!0,extrudeDirection:!0,applyOffset:!0};function ye(e){var r=e.geometry,i=r.attributes,n=i.position.values,o=t.defined(i.normal)?i.normal.values:void 0,s=t.defined(i.bitangent)?i.bitangent.values:void 0,u=t.defined(i.tangent)?i.tangent.values:void 0,p=t.defined(i.st)?i.st.values:void 0,d=t.defined(i.extrudeDirection)?i.extrudeDirection.values:void 0,l=t.defined(i.applyOffset)?i.applyOffset.values:void 0,v=r.indices,f=[];for(var m in i)i.hasOwnProperty(m)&&!me[m]&&t.defined(i[m])&&f.push(m);var y,c,h,C,b=f.length,w=te(r),g=te(r),T=[];T.length=n.length/3;var A=[];for(A.length=n.length/3,C=0;C<T.length;++C)T[C]=-1,A[C]=-1;var E=v.length;for(C=0;C<E;C+=3){var D=v[C],x=v[C+1],P=v[C+2],I=a.Cartesian3.fromArray(n,3*D),S=a.Cartesian3.fromArray(n,3*x),N=a.Cartesian3.fromArray(n,3*P),O=$(I,S,N);if(t.defined(O)&&O.positions.length>3)for(var L=O.positions,z=O.indices,G=z.length,M=0;M<G;++M){var q=z[M],R=L[q];R.y<0?(y=g.attributes,c=g.indices,h=T):(y=w.attributes,c=w.indices,h=A),le(D,x,P,R,n,o,u,s,p,d,l,y,f,b,i,fe(y,c,h,v,q<3?C+q:-1,R))}else t.defined(O)&&(I=O.positions[0],S=O.positions[1],N=O.positions[2]),I.y<0?(y=g.attributes,c=g.indices,h=T):(y=w.attributes,c=w.indices,h=A),le(D,x,P,I,n,o,u,s,p,d,l,y,f,b,i,fe(y,c,h,v,C,I)),le(D,x,P,S,n,o,u,s,p,d,l,y,f,b,i,fe(y,c,h,v,C+1,S)),le(D,x,P,N,n,o,u,s,p,d,l,y,f,b,i,fe(y,c,h,v,C+2,N))}re(e,g,w)}var ce=f.Plane.fromPointNormal(a.Cartesian3.ZERO,a.Cartesian3.UNIT_Y),he=new a.Cartesian3,Ce=new a.Cartesian3;function be(e,r,n,o,s,u,p){if(t.defined(p)){var d=a.Cartesian3.fromArray(o,3*e,se);a.Cartesian3.equalsEpsilon(d,n,i.CesiumMath.EPSILON10)?u.applyOffset.values[s]=p[e]:u.applyOffset.values[s]=p[r]}}function we(e){var r,n=e.geometry,o=n.attributes,s=o.position.values,u=t.defined(o.applyOffset)?o.applyOffset.values:void 0,p=n.indices,d=te(n),l=te(n),f=p.length,m=[];m.length=s.length/3;var y=[];for(y.length=s.length/3,r=0;r<m.length;++r)m[r]=-1,y[r]=-1;for(r=0;r<f;r+=2){var c=p[r],h=p[r+1],C=a.Cartesian3.fromArray(s,3*c,se),b=a.Cartesian3.fromArray(s,3*h,ue);Math.abs(C.y)<i.CesiumMath.EPSILON6&&(C.y<0?C.y=-i.CesiumMath.EPSILON6:C.y=i.CesiumMath.EPSILON6),Math.abs(b.y)<i.CesiumMath.EPSILON6&&(b.y<0?b.y=-i.CesiumMath.EPSILON6:b.y=i.CesiumMath.EPSILON6);var w=d.attributes,g=d.indices,T=y,A=l.attributes,E=l.indices,D=m,x=v.IntersectionTests.lineSegmentPlane(C,b,ce,pe);if(t.defined(x)){var P=a.Cartesian3.multiplyByScalar(a.Cartesian3.UNIT_Y,5*i.CesiumMath.EPSILON9,he);C.y<0&&(a.Cartesian3.negate(P,P),w=l.attributes,g=l.indices,T=m,A=d.attributes,E=d.indices,D=y);var I=a.Cartesian3.add(x,P,Ce);be(c,h,C,s,fe(w,g,T,p,r,C),w,u),be(c,h,I,s,fe(w,g,T,p,-1,I),w,u),a.Cartesian3.negate(P,P),a.Cartesian3.add(x,P,I),be(c,h,I,s,fe(A,E,D,p,-1,I),A,u),be(c,h,b,s,fe(A,E,D,p,r+1,b),A,u)}else{var S,N,O;C.y<0?(S=l.attributes,N=l.indices,O=m):(S=d.attributes,N=d.indices,O=y),be(c,h,C,s,fe(S,N,O,p,r,C),S,u),be(c,h,b,s,fe(S,N,O,p,r+1,b),S,u)}}re(e,l,d)}var ge=new o.Cartesian2,Te=new o.Cartesian2,Ae=new a.Cartesian3,Ee=new a.Cartesian3,De=new a.Cartesian3,xe=new a.Cartesian3,Pe=new a.Cartesian3,Ie=new a.Cartesian3,Se=new n.Cartesian4;function Ne(e){for(var t=e.attributes,r=t.position.values,i=t.prevPosition.values,n=t.nextPosition.values,o=r.length,s=0;s<o;s+=3){var u=a.Cartesian3.unpack(r,s,Ae);if(!(u.x>0)){var p=a.Cartesian3.unpack(i,s,Ee);(u.y<0&&p.y>0||u.y>0&&p.y<0)&&(s-3>0?(i[s]=r[s-3],i[s+1]=r[s-2],i[s+2]=r[s-1]):a.Cartesian3.pack(u,i,s));var d=a.Cartesian3.unpack(n,s,De);(u.y<0&&d.y>0||u.y>0&&d.y<0)&&(s+3<o?(n[s]=r[s+3],n[s+1]=r[s+4],n[s+2]=r[s+5]):a.Cartesian3.pack(u,n,s))}}}var Oe=5*i.CesiumMath.EPSILON9,Le=i.CesiumMath.EPSILON6;C.splitLongitude=function(e){if(!t.defined(e))throw new r.DeveloperError("instance is required.");var s=e.geometry,p=s.boundingSphere;if(t.defined(p)&&(p.center.x-p.radius>0||n.BoundingSphere.intersectPlane(p,f.Plane.ORIGIN_ZX_PLANE)!==n.Intersect.INTERSECTING))return e;if(s.geometryType!==u.GeometryType.NONE)switch(s.geometryType){case u.GeometryType.POLYLINES:!function(e){var r,s,u,p=e.geometry,d=p.attributes,l=d.position.values,f=d.prevPosition.values,m=d.nextPosition.values,y=d.expandAndWidth.values,c=t.defined(d.st)?d.st.values:void 0,h=t.defined(d.color)?d.color.values:void 0,C=te(p),b=te(p),w=!1,g=l.length/3;for(r=0;r<g;r+=4){var T=r,A=r+2,E=a.Cartesian3.fromArray(l,3*T,Ae),D=a.Cartesian3.fromArray(l,3*A,Ee);if(Math.abs(E.y)<Le)for(E.y=Le*(D.y<0?-1:1),l[3*r+1]=E.y,l[3*(r+1)+1]=E.y,s=3*T;s<3*T+12;s+=3)f[s]=l[3*r],f[s+1]=l[3*r+1],f[s+2]=l[3*r+2];if(Math.abs(D.y)<Le)for(D.y=Le*(E.y<0?-1:1),l[3*(r+2)+1]=D.y,l[3*(r+3)+1]=D.y,s=3*T;s<3*T+12;s+=3)m[s]=l[3*(r+2)],m[s+1]=l[3*(r+2)+1],m[s+2]=l[3*(r+2)+2];var x=C.attributes,P=C.indices,I=b.attributes,S=b.indices,N=v.IntersectionTests.lineSegmentPlane(E,D,ce,xe);if(t.defined(N)){w=!0;var O=a.Cartesian3.multiplyByScalar(a.Cartesian3.UNIT_Y,Oe,Pe);E.y<0&&(a.Cartesian3.negate(O,O),x=b.attributes,P=b.indices,I=C.attributes,S=C.indices);var L=a.Cartesian3.add(N,O,Ie);x.position.values.push(E.x,E.y,E.z,E.x,E.y,E.z),x.position.values.push(L.x,L.y,L.z),x.position.values.push(L.x,L.y,L.z),x.prevPosition.values.push(f[3*T],f[3*T+1],f[3*T+2]),x.prevPosition.values.push(f[3*T+3],f[3*T+4],f[3*T+5]),x.prevPosition.values.push(E.x,E.y,E.z,E.x,E.y,E.z),x.nextPosition.values.push(L.x,L.y,L.z),x.nextPosition.values.push(L.x,L.y,L.z),x.nextPosition.values.push(L.x,L.y,L.z),x.nextPosition.values.push(L.x,L.y,L.z),a.Cartesian3.negate(O,O),a.Cartesian3.add(N,O,L),I.position.values.push(L.x,L.y,L.z),I.position.values.push(L.x,L.y,L.z),I.position.values.push(D.x,D.y,D.z,D.x,D.y,D.z),I.prevPosition.values.push(L.x,L.y,L.z),I.prevPosition.values.push(L.x,L.y,L.z),I.prevPosition.values.push(L.x,L.y,L.z),I.prevPosition.values.push(L.x,L.y,L.z),I.nextPosition.values.push(D.x,D.y,D.z,D.x,D.y,D.z),I.nextPosition.values.push(m[3*A],m[3*A+1],m[3*A+2]),I.nextPosition.values.push(m[3*A+3],m[3*A+4],m[3*A+5]);var z=o.Cartesian2.fromArray(y,2*T,ge),G=Math.abs(z.y);x.expandAndWidth.values.push(-1,G,1,G),x.expandAndWidth.values.push(-1,-G,1,-G),I.expandAndWidth.values.push(-1,G,1,G),I.expandAndWidth.values.push(-1,-G,1,-G);var M=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(N,E,De));if(M/=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(D,E,De)),t.defined(h)){var q=n.Cartesian4.fromArray(h,4*T,Se),R=n.Cartesian4.fromArray(h,4*A,Se),B=i.CesiumMath.lerp(q.x,R.x,M),V=i.CesiumMath.lerp(q.y,R.y,M),k=i.CesiumMath.lerp(q.z,R.z,M),F=i.CesiumMath.lerp(q.w,R.w,M);for(s=4*T;s<4*T+8;++s)x.color.values.push(h[s]);for(x.color.values.push(B,V,k,F),x.color.values.push(B,V,k,F),I.color.values.push(B,V,k,F),I.color.values.push(B,V,k,F),s=4*A;s<4*A+8;++s)I.color.values.push(h[s])}if(t.defined(c)){var _=o.Cartesian2.fromArray(c,2*T,ge),U=o.Cartesian2.fromArray(c,2*(r+3),Te),Y=i.CesiumMath.lerp(_.x,U.x,M);for(s=2*T;s<2*T+4;++s)x.st.values.push(c[s]);for(x.st.values.push(Y,_.y),x.st.values.push(Y,U.y),I.st.values.push(Y,_.y),I.st.values.push(Y,U.y),s=2*A;s<2*A+4;++s)I.st.values.push(c[s])}u=x.position.values.length/3-4,P.push(u,u+2,u+1),P.push(u+1,u+2,u+3),u=I.position.values.length/3-4,S.push(u,u+2,u+1),S.push(u+1,u+2,u+3)}else{var Z,H;for(E.y<0?(Z=b.attributes,H=b.indices):(Z=C.attributes,H=C.indices),Z.position.values.push(E.x,E.y,E.z),Z.position.values.push(E.x,E.y,E.z),Z.position.values.push(D.x,D.y,D.z),Z.position.values.push(D.x,D.y,D.z),s=3*r;s<3*r+12;++s)Z.prevPosition.values.push(f[s]),Z.nextPosition.values.push(m[s]);for(s=2*r;s<2*r+8;++s)Z.expandAndWidth.values.push(y[s]),t.defined(c)&&Z.st.values.push(c[s]);if(t.defined(h))for(s=4*r;s<4*r+16;++s)Z.color.values.push(h[s]);u=Z.position.values.length/3-4,H.push(u,u+2,u+1),H.push(u+1,u+2,u+3)}}w&&(Ne(b),Ne(C)),re(e,b,C)}(e);break;case u.GeometryType.TRIANGLES:ye(e);break;case u.GeometryType.LINES:we(e)}else Y(s),s.primitiveType===u.PrimitiveType.TRIANGLES?ye(e):s.primitiveType===u.PrimitiveType.LINES&&we(e);return e},e.GeometryPipeline=C}));
//# sourceMappingURL=GeometryPipeline-585f444f.js.map
